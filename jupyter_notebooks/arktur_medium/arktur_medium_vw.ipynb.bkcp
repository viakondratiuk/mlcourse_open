{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "import pandas as pd\n",
    "import json\n",
    "import os\n",
    "from tqdm import tqdm_notebook\n",
    "from sklearn.metrics import mean_absolute_error\n",
    "%matplotlib inline"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "PATH_TO_DATA = '../../data/arktur_medium/'\n",
    "!PATH_TO_DATA=../../data/arktur_medium/"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "!head -1 $PATH_TO_DATA/test.json > $PATH_TO_DATA/test1.json"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "with open(os.path.join(PATH_TO_DATA, \"test1.json\")) as inp_json:\n",
    "    first_json = json.load(inp_json)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "dict_keys(['_id', 'meta_tags', 'url', 'content', 'author', 'link_tags', 'published', '_timestamp', '_spider', 'image_url', 'title', 'domain', 'tags'])"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "first_json.keys()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'al:android:app_name': 'Medium',\n",
       " 'al:android:package': 'com.medium.reader',\n",
       " 'al:android:url': 'medium://p/30e4b8eb6161',\n",
       " 'al:ios:app_name': 'Medium',\n",
       " 'al:ios:app_store_id': '828256236',\n",
       " 'al:ios:url': 'medium://p/30e4b8eb6161',\n",
       " 'al:web:url': 'https://hackernoon.com/create-native-apps-for-iphone-and-android-with-goodbarber-using-a-diy-app-builder-30e4b8eb6161',\n",
       " 'article:author': '192991374512987',\n",
       " 'article:published_time': '2017-06-23T08:19:34.211Z',\n",
       " 'article:publisher': 'https://www.facebook.com/hackernoon',\n",
       " 'author': 'Siftery',\n",
       " 'description': 'GoodBarber is a DIY app builder to create native apps for iPhone and Android. Created in 2011, more than 30,000 apps have been published through GoodBarber today. GoodBarber is an app builder created…',\n",
       " 'fb:app_id': '542599432471018',\n",
       " 'og:description': 'Originally published at siftery.com.',\n",
       " 'og:image': 'https://cdn-images-1.medium.com/max/1200/1*unLBOGhAI42ae2D6Xm2CJg.jpeg',\n",
       " 'og:site_name': 'Hacker Noon',\n",
       " 'og:title': 'Create native apps for iPhone and Android with GoodBarber using a DIY app builder',\n",
       " 'og:type': 'article',\n",
       " 'og:url': 'https://hackernoon.com/create-native-apps-for-iphone-and-android-with-goodbarber-using-a-diy-app-builder-30e4b8eb6161',\n",
       " 'referrer': 'unsafe-url',\n",
       " 'robots': 'index, follow',\n",
       " 'theme-color': '#000000',\n",
       " 'title': 'Create native apps for iPhone and Android with GoodBarber using a DIY app builder',\n",
       " 'twitter:app:id:iphone': '828256236',\n",
       " 'twitter:app:name:iphone': 'Medium',\n",
       " 'twitter:app:url:iphone': 'medium://p/30e4b8eb6161',\n",
       " 'twitter:card': 'summary_large_image',\n",
       " 'twitter:creator': '@siftery',\n",
       " 'twitter:data1': '7 min read',\n",
       " 'twitter:description': 'Originally published at siftery.com.',\n",
       " 'twitter:image:src': 'https://cdn-images-1.medium.com/max/1200/1*unLBOGhAI42ae2D6Xm2CJg.jpeg',\n",
       " 'twitter:label1': 'Reading time',\n",
       " 'twitter:site': '@hackernoon',\n",
       " 'viewport': 'width=device-width, initial-scale=1'}"
      ]
     },
     "execution_count": 34,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "first_json[\"meta_tags\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 225,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# remove html tags\n",
    "\n",
    "from html.parser import HTMLParser\n",
    "\n",
    "class MLStripper(HTMLParser):\n",
    "    def __init__(self):\n",
    "        self.reset()\n",
    "        self.strict = False\n",
    "        self.convert_charrefs= True\n",
    "        self.fed = []\n",
    "    def handle_data(self, d):\n",
    "        self.fed.append(d)\n",
    "    def get_data(self):\n",
    "        return ' '.join(self.fed)\n",
    "\n",
    "def strip_tags(html):\n",
    "    s = MLStripper()\n",
    "    s.feed(html)\n",
    "    return s.get_data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "INP_TRAIN = \"train.json\"\n",
    "INP_TEST  = \"test.json\"\n",
    "!INP_TRAIN=train.json\n",
    "!INP_TEST=test.json\n",
    "\n",
    "OUT_TRAIN = \"train.vw\"\n",
    "OUT_PART_TRAIN = \"part_train.vw\"\n",
    "OUT_PART_VALID = \"part_valid.vw\"\n",
    "OUT_TEST = \"test.vw\"\n",
    "!OUT_TRAIN=train.vw\n",
    "!OUT_PART_TRAIN=part_train.vw\n",
    "!OUT_PART_VALID=part_valid.vw\n",
    "!OUT_TEST=test.vw"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 339,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "train_target = pd.read_csv(os.path.join(PATH_TO_DATA, \n",
    "                                        'train_log1p_recommends.csv'), \n",
    "                           index_col='id')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "def hyperopt_objective(params):\n",
    "    !vw -d data/habr_train.vw \\\n",
    "    -l {params['l']} \\\n",
    "    --quiet\n",
    "    \n",
    "    !vw -i habr_model.vw -t \\\n",
    "    -d data/habr_valid.vw \\\n",
    "    -p habr_valid_pred.txt \\\n",
    "    --quiet\n",
    "    \n",
    "    with open('habr_valid_pred.txt') as pred_file:\n",
    "        valid_prediction = [float(popularity) for popularity in pred_file.readlines()]\n",
    "    score = mean_absolute_error(valid_vals, valid_prediction)\n",
    "    return score\n",
    "\n",
    "\n",
    "params_space = {\n",
    "    'l': hp.uniform('l', 0.2, 0.8), # default = 0.5\n",
    "}\n",
    "\n",
    "\n",
    "%%time\n",
    "trials = Trials()\n",
    "\n",
    "best_params = fmin(\n",
    "    hyperopt_objective,\n",
    "    space=params_space,\n",
    "    algo=tpe.suggest,\n",
    "    max_evals=200,\n",
    "    trials=trials\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "- log of prediction\n",
    "\n",
    "*Как завести vw-hyperopt.py*\n",
    "1. Установите нужные либы\n",
    "!pip install hyperopt\n",
    "!pip install networkx==1.11 - откат одной из связанных библиотек для работы скрипта\n",
    "\n",
    "2. Найдите, куда установилось\n",
    "!find / -name “vowpalwabbit” 2>/dev/null\n",
    "!find / -name “vw-hyperopt.py” 2>/dev/null\n",
    "\n",
    "3. Подготовьте vw-hyperopt.py\n",
    "Необходимо добавить encoding=“utf-8” во все функции open() для правильной работы с utf-8 файлами\n",
    "\n",
    "*Ну и теперь можно удачно запустить.*\n",
    "Пример строки запуска(параметры изменил)\n",
    "%run /vowpal_wabbit/utl/vw-hyperopt.py \\ --train ../../data/vowpal/habr_traink.vw \\ --holdout ../../data/vowpal/habr_tholdout.vw \\ --max_evals 200 \\ --outer_loss_function squared \\ --vw_space ‘--algorithms=sgd -l=0.01..1~L --passes=1..10~I --loss_function=squared ’ --plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 413,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# transform data to vw format\n",
    "import string\n",
    "from datetime import datetime\n",
    "from nltk.corpus import stopwords\n",
    "from nltk import word_tokenize\n",
    "from nltk.stem.wordnet import WordNetLemmatizer\n",
    "\n",
    "lmtzr = WordNetLemmatizer()\n",
    "stop = set(stopwords.words(\"english\") + list(string.punctuation) + [\"’\", \"“\", \"”\"])\n",
    "tokenize = lambda s: \" \".join(lmtzr.lemmatize(i) for i in word_tokenize(s.lower()) if i not in stop)\n",
    "\n",
    "\n",
    "def to_vw(data, label):\n",
    "    exclude = set(string.punctuation)\n",
    "       \n",
    "    content = strip_tags(data[\"content\"]).replace(\"\\n\", \" \").replace(\":\", \"\").replace(\"|\", \"\")\n",
    "    content = tokenize(content)\n",
    "    \n",
    "    title = strip_tags(data[\"title\"]).replace(\"\\n\", \" \").replace(\":\", \"\").replace(\"|\", \"\")\n",
    "    title = tokenize(title)\n",
    "    \n",
    "    author = strip_tags(data[\"meta_tags\"][\"author\"]).replace(\"\\n\", \" \").replace(\":\", \"\").replace(\"|\", \"\")\n",
    "    author = \"\".join(ch for ch in author if ch not in exclude).replace(\" \", \"_\").lower()\n",
    "    \n",
    "    domain = data[\"domain\"].replace(\"\\n\", \" \").replace(\":\", \"\").replace(\"|\", \"\").lower()\n",
    "    \n",
    "    # date time\n",
    "    dt = datetime.strptime(data[\"published\"][\"$date\"][:-1], \"%Y-%m-%dT%H:%M:%S.%f\")\n",
    "    month = dt.month\n",
    "    weekday = dt.weekday()\n",
    "    hour = dt.hour \n",
    "    read_time = data[\"meta_tags\"][\"twitter:data1\"].split(\" \")[0]\n",
    "    read_time = read_time if read_time else 0.1\n",
    "    \n",
    "    # binary\n",
    "    is_weekend = 1 if weekday in (5, 6) else 0\n",
    "    is_night = 1 if hour in range(0, 7) else 0\n",
    "    is_morning = 1 if hour in range(7, 12) else 0\n",
    "    is_noon = 1 if hour in range(12, 19) else 0\n",
    "    is_eve = 1 if hour in range(19, 24) else 0\n",
    "    is_image = 1 if data[\"image_url\"] else 0\n",
    "\n",
    "\n",
    "    out = [\n",
    "        str(np.log(label)),\n",
    "        \"a_content %s\" % content,\n",
    "        \"b_author %s\" % author,\n",
    "        \"c_title %s\" % title,\n",
    "        \"d_domain %s\" % domain,\n",
    "        \"e_num 10:%s 11:%s 12:%s 13:%s\" % (month, weekday + 1, hour + 1, read_time),\n",
    "        \"f_binary 0:%s 1:%s 2:%s 3:%s 4:%s 5:%s\" % \n",
    "        (is_weekend, is_night, is_morning, is_noon, is_eve, is_image)\n",
    "    ]\n",
    "    \n",
    "    return str(\" |\".join(out).encode('ascii', 'ignore').strip())[2:-1] + \"\\n\""
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "1. json to pd df\n",
    "2. save pd df somehow? pickle?\n",
    "3. check df statistics\n",
    "4. content - punctuation, stopwords, lema\n",
    "5. count vectorizer\n",
    "6. tf idf\n",
    "7. author, title, domain\n",
    "8. year_month, weekday, hour\n",
    "9. scaling?\n",
    "10. binary features\n",
    "11. chose an algorithm"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 415,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "d88a195408f04769b6fead70a6327498"
      }
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n"
     ]
    }
   ],
   "source": [
    "with open(os.path.join(PATH_TO_DATA, INP_TRAIN)) as inp_json, \\\n",
    "     open(os.path.join(PATH_TO_DATA, OUT_TRAIN), 'w') as out_train:\n",
    "            \n",
    "    for n, line in enumerate(tqdm_notebook(inp_json)):\n",
    "        if n == -1: break\n",
    "\n",
    "        json_data = json.loads(line)\n",
    "        label = train_target.iloc[n][\"log_recommends\"]\n",
    "        out = to_vw(json_data, label)\n",
    "        out_train.write(out)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 416,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# split train into part_train and part_valid\n",
    "\n",
    "!split -l 36889 $PATH_TO_DATA/$OUT_TRAIN $PATH_TO_DATA/$OUT_TRAIN\"_\"\n",
    "\n",
    "!mv $PATH_TO_DATA/$OUT_TRAIN\"_aa\" $PATH_TO_DATA/$OUT_PART_TRAIN\n",
    "!mv $PATH_TO_DATA/$OUT_TRAIN\"_ab\" $PATH_TO_DATA/$OUT_PART_VALID"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 417,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# from validation target file \n",
    "\n",
    "!cut -f 1 -d ' ' $PATH_TO_DATA/$OUT_PART_VALID > $PATH_TO_DATA/part_valid_target.txt"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "| Arktur | File| Features | VW Params | MAE |\n",
    "|------|------|------|------|------|\n",
    "| 0.89639 | squared_b_20_l_0.5_t_0.5.csv | content | --loss_function squared --ngram 2 --passes 3 -b 20 -l 0.5 --power_t 0.5 | |\n",
    "| 0.88511 | at_squared_b_21_l_0.5_t_0.5.csv | no punctuation, author, title, content | --loss_function squared --ngram 2 --passes 3 -b 21 -l 0.5 --power_t 0.5 | 1.047 |\n",
    "| not| not | no pun, author, title, content, month, dayofweek, hour | --loss_function squared --ngram 2 --passes 3 -b 21 -l 0.5 --power_t 0.5 | 1.027 |\n",
    "| not| not | no pun-scale, author, title, content, month, dayofweek, hour | --loss_function squared --ngram 2 --passes 3 -b 21 -l 0.5 --power_t 0.5 | 1.030 |\n",
    "| 0.88297 | squared_b_21_l_0.5_t_0.5_l2_1e-5.csv | nonpun, author, title, content, month, dayofweek, hour | --loss_function squared --ngram=2 --passes 3 -b 21 -l 0.5 --power_t 0.5 --l2=1e-5 | 1.019 |\n",
    "| 0.90253 | squared_b_21_l_0.7_t_0.5_l2_1e-5_new_features.csv | nonpun, author, title, content, month, dayofweek, hour, bin, domain | --loss_function squared --ngram=2 --passes 3 -b 21 -l 0.7 --power_t 0.5 --l2=1e-5 | 1.016 |\n",
    "| 0.89520 | squared_b_21_l_0.5_t_0.5_new_features.csv | nonpun, author, title, content, month, dayofweek, hour, bin, domain | --loss_function squared --ngram=2 --passes 3 -b 21 -l 0.5 --power_t 0.5 | 1.026 |\n",
    "| 0.85777 | g_3_p_5_b_21_l_0.5_t_0.5_l1_lower.csv | nonpun, low, content, author, title, domain, month, dayofweek, hour, bin | --loss_function squared --ngram=3 --passes 5 -b 21 -l 0.5 --power_t 0.5 --l2=1e-5 | 1.014 |\n",
    "| 0.85671 | g_3_p_5_b_21_l_0.5_t_0.5_l1_lower.csv | nonpun, low, content, author, title, domain, month, dayofweek, hour| --loss_function squared --ngram=3 --passes 5 -b 21 -l 0.5 --power_t 0.5 --l2=1e-5 | 1.014 |\n",
    "| 0.85415 | filtered_content_n2_p5_b28_l0.5_p0.5_l21e-5.csv | f_content | --loss_function squared --ngram=2 --passes 5 -b 28 -l 0.5 --power_t=0.5 --l2=1e-5 | 0.984 |\n",
    "| 0.82853 | lema_content_n2_p5_b24_l0.5_p0.5_l21e-5.csv | l_content | --loss_function squared --ngram=2 --passes 5 -b 24 -l 0.5 --power_t=0.5 --l2=1e-5 | 0.9813 |\n",
    "| 0.69766 | log_lema_features_n2_p5_b24_l0.5_p0.5_l21e-5.csv | log_lema_features | --loss_function squared --ngram=2 --passes 5 -b 24 -l 0.5 --power_t=0.5 --l2=1e-5 | log 0.4161 |"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 438,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "Generating 2-grams for all namespaces.\n",
      "ignoring namespaces beginning with: a \n",
      "only testing\n",
      "Num weight bits = 24\n",
      "learning rate = 0.5\n",
      "initial_t = 0\n",
      "power_t = 0.5\n",
      "using no cache\n",
      "Reading datafile = \n",
      "num sources = 1\n",
      "average  since         example        example  current  current  current\n",
      "loss     last          counter         weight    label  predict features\n",
      "^C\n"
     ]
    }
   ],
   "source": [
    "!vw -i $PATH_TO_DATA/model.vw -t --invert_hash $PATH_TO_DATA/invert_hash.vw"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "!find / -name \"vowpalwabbit\" 2>/dev/null"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "!find / -name \"vw-hyperopt.py\" 2>/dev/null"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 465,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 11:26:12,443 INFO     [root/vw-hyperopt:250]: loading true holdout class labels...\n",
      "2017-11-01 11:26:12,604 INFO     [root/vw-hyperopt:257]: holdout length: 15810\n",
      "2017-11-01 11:26:12,606 DEBUG    [root/vw-hyperopt:320]: starting hypersearch...\n",
      "2017-11-01 11:26:12,623 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.004462 seconds\n",
      "2017-11-01 11:26:12,627 INFO     [hyperopt.tpe/tpe:844]: TPE using 0 trials\n",
      "2017-11-01 11:26:12,632 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.1\n",
      "2017-11-01 11:26:12,641 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 2.293110126098825 --l2 4.394402312218596e-07 --l1 1.0884538019468025e-06 --ngram 2 --passes 4 --loss_function squared --power_t 0.15312831696127777 --bit_precision 25 \n",
      "2017-11-01 11:27:06,630 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:27:07,816 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 2.293110126098825 --l2 4.394402312218596e-07 --l1 1.0884538019468025e-06 --ngram 2 --passes 4 --loss_function squared --power_t 0.15312831696127777 --bit_precision 25 \n",
      "2017-11-01 11:27:07,819 INFO     [root/vw-hyperopt:284]: loss value: 0.306683\n",
      "2017-11-01 11:27:07,825 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:55.192362\n",
      "2017-11-01 11:27:07,954 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.015032 seconds\n",
      "2017-11-01 11:27:07,957 INFO     [hyperopt.tpe/tpe:842]: TPE using 1/1 trials with best loss 0.306683\n",
      "2017-11-01 11:27:07,963 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.2\n",
      "2017-11-01 11:27:07,967 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.011876485160767872 --l2 3.645645777723749e-08 --ngram 2 --passes 5 --loss_function squared --power_t 0.5007211571688552 --bit_precision 25 \n",
      "2017-11-01 11:28:25,199 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:28:26,057 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.011876485160767872 --l2 3.645645777723749e-08 --ngram 2 --passes 5 --loss_function squared --power_t 0.5007211571688552 --bit_precision 25 \n",
      "2017-11-01 11:28:26,059 INFO     [root/vw-hyperopt:284]: loss value: 0.274261\n",
      "2017-11-01 11:28:26,075 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:18.111713\n",
      "2017-11-01 11:28:26,222 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.008144 seconds\n",
      "2017-11-01 11:28:26,225 INFO     [hyperopt.tpe/tpe:842]: TPE using 2/2 trials with best loss 0.274261\n",
      "2017-11-01 11:28:26,232 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.3\n",
      "2017-11-01 11:28:26,234 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.4389095453827498 --ngram 2 --passes 8 --loss_function squared --power_t 0.5350673877791368 --bit_precision 25 \n",
      "2017-11-01 11:30:10,803 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:30:11,421 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.4389095453827498 --ngram 2 --passes 8 --loss_function squared --power_t 0.5350673877791368 --bit_precision 25 \n",
      "2017-11-01 11:30:11,423 INFO     [root/vw-hyperopt:284]: loss value: 0.304560\n",
      "2017-11-01 11:30:11,426 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:45.194435\n",
      "2017-11-01 11:30:11,556 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005437 seconds\n",
      "2017-11-01 11:30:11,557 INFO     [hyperopt.tpe/tpe:842]: TPE using 3/3 trials with best loss 0.274261\n",
      "2017-11-01 11:30:11,562 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.4\n",
      "2017-11-01 11:30:11,568 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.0150430081059378 --l2 2.4737993124714356e-06 --ngram 2 --passes 10 --loss_function squared --power_t 0.5301057060593999 --bit_precision 25 \n",
      "2017-11-01 11:32:26,737 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:32:27,370 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.0150430081059378 --l2 2.4737993124714356e-06 --ngram 2 --passes 10 --loss_function squared --power_t 0.5301057060593999 --bit_precision 25 \n",
      "2017-11-01 11:32:27,373 INFO     [root/vw-hyperopt:284]: loss value: 0.282851\n",
      "2017-11-01 11:32:27,377 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:15.814708\n",
      "2017-11-01 11:32:27,515 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005406 seconds\n",
      "2017-11-01 11:32:27,517 INFO     [hyperopt.tpe/tpe:842]: TPE using 4/4 trials with best loss 0.274261\n",
      "2017-11-01 11:32:27,521 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.5\n",
      "2017-11-01 11:32:27,522 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 7.847237899058886 --l2 0.0010240366655101315 --ngram 2 --passes 2 --loss_function squared --power_t 0.7201509665944924 --bit_precision 25 \n",
      "2017-11-01 11:33:04,224 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:33:04,818 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 7.847237899058886 --l2 0.0010240366655101315 --ngram 2 --passes 2 --loss_function squared --power_t 0.7201509665944924 --bit_precision 25 \n",
      "2017-11-01 11:33:04,820 INFO     [root/vw-hyperopt:284]: loss value: 0.267883\n",
      "2017-11-01 11:33:04,822 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:37.300624\n",
      "2017-11-01 11:33:04,988 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005527 seconds\n",
      "2017-11-01 11:33:04,990 INFO     [hyperopt.tpe/tpe:842]: TPE using 5/5 trials with best loss 0.267883\n",
      "2017-11-01 11:33:04,994 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.6\n",
      "2017-11-01 11:33:04,995 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.2085375984363987 --l2 4.806733274542402e-07 --l1 1.0216984098345993e-07 --ngram 2 --passes 9 --loss_function squared --power_t 0.5981516613997975 --bit_precision 25 \n",
      "2017-11-01 11:35:00,566 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:35:01,096 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.2085375984363987 --l2 4.806733274542402e-07 --l1 1.0216984098345993e-07 --ngram 2 --passes 9 --loss_function squared --power_t 0.5981516613997975 --bit_precision 25 \n",
      "2017-11-01 11:35:01,098 INFO     [root/vw-hyperopt:284]: loss value: 0.287999\n",
      "2017-11-01 11:35:01,108 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:56.114525\n",
      "2017-11-01 11:35:01,258 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005382 seconds\n",
      "2017-11-01 11:35:01,259 INFO     [hyperopt.tpe/tpe:842]: TPE using 6/6 trials with best loss 0.267883\n",
      "2017-11-01 11:35:01,266 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.7\n",
      "2017-11-01 11:35:01,267 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.294758659621406 --l2 0.00194707552590083 --l1 1.3980930204923765e-08 --ngram 2 --passes 4 --loss_function squared --power_t 0.9794242693622698 --bit_precision 25 \n",
      "2017-11-01 11:36:07,255 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 11:36:07,833 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.294758659621406 --l2 0.00194707552590083 --l1 1.3980930204923765e-08 --ngram 2 --passes 4 --loss_function squared --power_t 0.9794242693622698 --bit_precision 25 \n",
      "2017-11-01 11:36:07,836 INFO     [root/vw-hyperopt:284]: loss value: 0.244926\n",
      "2017-11-01 11:36:07,838 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:06.571576\n",
      "2017-11-01 11:36:07,964 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005542 seconds\n",
      "2017-11-01 11:36:07,966 INFO     [hyperopt.tpe/tpe:842]: TPE using 7/7 trials with best loss 0.244926\n",
      "2017-11-01 11:36:07,970 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.8\n",
      "2017-11-01 11:36:07,972 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.7353818623871349 --l1 4.535829279609697e-06 --ngram 2 --passes 2 --loss_function squared --power_t 0.020465817756499728 --bit_precision 25 \n",
      "2017-11-01 11:36:30,706 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:36:31,093 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.7353818623871349 --l1 4.535829279609697e-06 --ngram 2 --passes 2 --loss_function squared --power_t 0.020465817756499728 --bit_precision 25 \n",
      "2017-11-01 11:36:31,094 INFO     [root/vw-hyperopt:284]: loss value: 0.337506\n",
      "2017-11-01 11:36:31,096 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:23.125684\n",
      "2017-11-01 11:36:31,236 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006243 seconds\n",
      "2017-11-01 11:36:31,238 INFO     [hyperopt.tpe/tpe:842]: TPE using 8/8 trials with best loss 0.244926\n",
      "2017-11-01 11:36:31,243 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.9\n",
      "2017-11-01 11:36:31,248 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.0664227379293589 --l1 0.0018469016836109894 --ngram 2 --passes 3 --loss_function squared --power_t 0.953948279927446 --bit_precision 25 \n",
      "2017-11-01 11:37:07,940 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:37:08,461 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.0664227379293589 --l1 0.0018469016836109894 --ngram 2 --passes 3 --loss_function squared --power_t 0.953948279927446 --bit_precision 25 \n",
      "2017-11-01 11:37:08,464 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 11:37:08,467 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:37.223762\n",
      "2017-11-01 11:37:08,593 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006091 seconds\n",
      "2017-11-01 11:37:08,596 INFO     [hyperopt.tpe/tpe:842]: TPE using 9/9 trials with best loss 0.244926\n",
      "2017-11-01 11:37:08,602 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.10\n",
      "2017-11-01 11:37:08,605 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.4232520648942337 --l2 1.9464702740793615e-08 --ngram 2 --passes 3 --loss_function squared --power_t 0.4413971913362967 --bit_precision 25 \n",
      "2017-11-01 11:38:02,210 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:38:03,565 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.4232520648942337 --l2 1.9464702740793615e-08 --ngram 2 --passes 3 --loss_function squared --power_t 0.4413971913362967 --bit_precision 25 \n",
      "2017-11-01 11:38:03,570 INFO     [root/vw-hyperopt:284]: loss value: 0.330292\n",
      "2017-11-01 11:38:03,576 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:54.973977\n",
      "2017-11-01 11:38:03,771 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006720 seconds\n",
      "2017-11-01 11:38:03,779 INFO     [hyperopt.tpe/tpe:842]: TPE using 10/10 trials with best loss 0.244926\n",
      "2017-11-01 11:38:03,793 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.11\n",
      "2017-11-01 11:38:03,799 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.6532456222319654 --l2 2.1178488031044623e-07 --ngram 2 --passes 6 --loss_function squared --power_t 0.33101849887806456 --bit_precision 25 \n",
      "2017-11-01 11:39:33,580 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:39:34,826 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.6532456222319654 --l2 2.1178488031044623e-07 --ngram 2 --passes 6 --loss_function squared --power_t 0.33101849887806456 --bit_precision 25 \n",
      "2017-11-01 11:39:34,833 INFO     [root/vw-hyperopt:284]: loss value: 0.328500\n",
      "2017-11-01 11:39:34,835 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:31.042051\n",
      "2017-11-01 11:39:34,988 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006707 seconds\n",
      "2017-11-01 11:39:34,990 INFO     [hyperopt.tpe/tpe:842]: TPE using 11/11 trials with best loss 0.244926\n",
      "2017-11-01 11:39:34,997 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.12\n",
      "2017-11-01 11:39:35,000 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.3305433230493281 --l2 2.899193790696676e-05 --l1 6.120291022746614e-05 --ngram 2 --passes 8 --loss_function squared --power_t 0.6401065055580105 --bit_precision 25 \n",
      "2017-11-01 11:41:24,709 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:41:25,565 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.3305433230493281 --l2 2.899193790696676e-05 --l1 6.120291022746614e-05 --ngram 2 --passes 8 --loss_function squared --power_t 0.6401065055580105 --bit_precision 25 \n",
      "2017-11-01 11:41:25,575 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 11:41:25,585 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:50.588142\n",
      "2017-11-01 11:41:25,737 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.007016 seconds\n",
      "2017-11-01 11:41:25,742 INFO     [hyperopt.tpe/tpe:842]: TPE using 12/12 trials with best loss 0.244926\n",
      "2017-11-01 11:41:25,765 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.13\n",
      "2017-11-01 11:41:25,770 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.08192697434428864 --l2 0.05849197403663761 --l1 5.769890849901068e-06 --ngram 2 --passes 9 --loss_function squared --power_t 0.5420068439103137 --bit_precision 25 \n",
      "2017-11-01 11:43:47,201 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:43:48,124 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.08192697434428864 --l2 0.05849197403663761 --l1 5.769890849901068e-06 --ngram 2 --passes 9 --loss_function squared --power_t 0.5420068439103137 --bit_precision 25 \n",
      "2017-11-01 11:43:48,133 INFO     [root/vw-hyperopt:284]: loss value: 0.242033\n",
      "2017-11-01 11:43:48,134 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:22.369327\n",
      "2017-11-01 11:43:48,350 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006510 seconds\n",
      "2017-11-01 11:43:48,352 INFO     [hyperopt.tpe/tpe:842]: TPE using 13/13 trials with best loss 0.242033\n",
      "2017-11-01 11:43:48,363 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.14\n",
      "2017-11-01 11:43:48,364 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.03488895272181752 --ngram 2 --passes 2 --loss_function squared --power_t 0.13995598650314572 --bit_precision 25 \n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 11:44:30,583 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:44:31,772 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.03488895272181752 --ngram 2 --passes 2 --loss_function squared --power_t 0.13995598650314572 --bit_precision 25 \n",
      "2017-11-01 11:44:31,787 INFO     [root/vw-hyperopt:284]: loss value: 0.269393\n",
      "2017-11-01 11:44:31,789 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:43.426290\n",
      "2017-11-01 11:44:31,966 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.010433 seconds\n",
      "2017-11-01 11:44:31,970 INFO     [hyperopt.tpe/tpe:842]: TPE using 14/14 trials with best loss 0.242033\n",
      "2017-11-01 11:44:32,007 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.15\n",
      "2017-11-01 11:44:32,013 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 7.587952300997423 --l2 1.0556303069401517e-07 --l1 0.015514986488004286 --ngram 2 --passes 8 --loss_function squared --power_t 0.3345149807758149 --bit_precision 25 \n",
      "2017-11-01 11:46:27,131 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:46:27,997 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 7.587952300997423 --l2 1.0556303069401517e-07 --l1 0.015514986488004286 --ngram 2 --passes 8 --loss_function squared --power_t 0.3345149807758149 --bit_precision 25 \n",
      "2017-11-01 11:46:28,001 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 11:46:28,009 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:56.002612\n",
      "2017-11-01 11:46:28,221 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.014369 seconds\n",
      "2017-11-01 11:46:28,225 INFO     [hyperopt.tpe/tpe:842]: TPE using 15/15 trials with best loss 0.242033\n",
      "2017-11-01 11:46:28,232 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.16\n",
      "2017-11-01 11:46:28,240 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.41592362878638595 --l2 0.0031432694144127686 --ngram 2 --passes 9 --loss_function squared --power_t 0.71799020656777 --bit_precision 25 \n",
      "2017-11-01 11:48:48,420 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:48:49,514 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.41592362878638595 --l2 0.0031432694144127686 --ngram 2 --passes 9 --loss_function squared --power_t 0.71799020656777 --bit_precision 25 \n",
      "2017-11-01 11:48:49,517 INFO     [root/vw-hyperopt:284]: loss value: 0.222078\n",
      "2017-11-01 11:48:49,522 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:21.288699\n",
      "2017-11-01 11:48:49,724 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.009758 seconds\n",
      "2017-11-01 11:48:49,730 INFO     [hyperopt.tpe/tpe:842]: TPE using 16/16 trials with best loss 0.222078\n",
      "2017-11-01 11:48:49,737 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.17\n",
      "2017-11-01 11:48:49,742 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.03422553956793596 --l2 2.6228604756296547e-08 --ngram 2 --passes 6 --loss_function squared --power_t 0.7485886285396572 --bit_precision 25 \n",
      "2017-11-01 11:50:20,076 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:50:20,723 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.03422553956793596 --l2 2.6228604756296547e-08 --ngram 2 --passes 6 --loss_function squared --power_t 0.7485886285396572 --bit_precision 25 \n",
      "2017-11-01 11:50:20,736 INFO     [root/vw-hyperopt:284]: loss value: 0.280389\n",
      "2017-11-01 11:50:20,744 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:31.007038\n",
      "2017-11-01 11:50:20,898 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005687 seconds\n",
      "2017-11-01 11:50:20,900 INFO     [hyperopt.tpe/tpe:842]: TPE using 17/17 trials with best loss 0.222078\n",
      "2017-11-01 11:50:20,909 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.18\n",
      "2017-11-01 11:50:20,911 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.0975419106514124 --ngram 2 --passes 7 --loss_function squared --power_t 0.3931883659372686 --bit_precision 25 \n",
      "2017-11-01 11:51:46,707 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:51:47,451 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.0975419106514124 --ngram 2 --passes 7 --loss_function squared --power_t 0.3931883659372686 --bit_precision 25 \n",
      "2017-11-01 11:51:47,457 INFO     [root/vw-hyperopt:284]: loss value: 0.356968\n",
      "2017-11-01 11:51:47,458 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:26.549416\n",
      "2017-11-01 11:51:47,594 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006480 seconds\n",
      "2017-11-01 11:51:47,597 INFO     [hyperopt.tpe/tpe:842]: TPE using 18/18 trials with best loss 0.222078\n",
      "2017-11-01 11:51:47,604 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.19\n",
      "2017-11-01 11:51:47,628 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.024018500974103168 --l2 2.4048823201323425e-07 --l1 4.8239134914351626e-05 --ngram 2 --passes 10 --loss_function squared --power_t 0.3497753404532826 --bit_precision 25 \n",
      "2017-11-01 11:53:54,679 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:53:55,109 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.024018500974103168 --l2 2.4048823201323425e-07 --l1 4.8239134914351626e-05 --ngram 2 --passes 10 --loss_function squared --power_t 0.3497753404532826 --bit_precision 25 \n",
      "2017-11-01 11:53:55,111 INFO     [root/vw-hyperopt:284]: loss value: 0.222362\n",
      "2017-11-01 11:53:55,113 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:07.509264\n",
      "2017-11-01 11:53:55,258 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.011995 seconds\n",
      "2017-11-01 11:53:55,262 INFO     [hyperopt.tpe/tpe:842]: TPE using 19/19 trials with best loss 0.222078\n",
      "2017-11-01 11:53:55,271 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.20\n",
      "2017-11-01 11:53:55,274 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 5.497503636120276 --l2 0.07542932628758015 --ngram 2 --passes 7 --loss_function squared --power_t 0.9724746138207664 --bit_precision 25 \n",
      "2017-11-01 11:55:47,093 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:55:47,823 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 5.497503636120276 --l2 0.07542932628758015 --ngram 2 --passes 7 --loss_function squared --power_t 0.9724746138207664 --bit_precision 25 \n",
      "2017-11-01 11:55:47,847 INFO     [root/vw-hyperopt:284]: loss value: 0.303760\n",
      "2017-11-01 11:55:47,850 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:52.578263\n",
      "2017-11-01 11:55:47,979 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006592 seconds\n",
      "2017-11-01 11:55:47,982 INFO     [hyperopt.tpe/tpe:842]: TPE using 20/20 trials with best loss 0.222078\n",
      "2017-11-01 11:55:48,017 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.21\n",
      "2017-11-01 11:55:48,019 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.1258544581289467 --l2 0.0021794519770999554 --l1 0.0003054781983812668 --ngram 2 --passes 10 --loss_function squared --power_t 0.7609731161979919 --bit_precision 25 \n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 11:58:03,128 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 11:58:03,565 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.1258544581289467 --l2 0.0021794519770999554 --l1 0.0003054781983812668 --ngram 2 --passes 10 --loss_function squared --power_t 0.7609731161979919 --bit_precision 25 \n",
      "2017-11-01 11:58:03,567 INFO     [root/vw-hyperopt:284]: loss value: 0.271779\n",
      "2017-11-01 11:58:03,570 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:15.552367\n",
      "2017-11-01 11:58:03,682 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006547 seconds\n",
      "2017-11-01 11:58:03,684 INFO     [hyperopt.tpe/tpe:842]: TPE using 21/21 trials with best loss 0.222078\n",
      "2017-11-01 11:58:03,705 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.22\n",
      "2017-11-01 11:58:03,708 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 3.3043752701203264 --l2 3.1466669500886764e-05 --l1 0.007426497341595218 --ngram 2 --passes 10 --loss_function squared --power_t 0.8547865689301662 --bit_precision 25 \n",
      "2017-11-01 12:00:17,543 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:00:17,959 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 3.3043752701203264 --l2 3.1466669500886764e-05 --l1 0.007426497341595218 --ngram 2 --passes 10 --loss_function squared --power_t 0.8547865689301662 --bit_precision 25 \n",
      "2017-11-01 12:00:17,961 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:00:17,973 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:14.267672\n",
      "2017-11-01 12:00:18,107 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005647 seconds\n",
      "2017-11-01 12:00:18,109 INFO     [hyperopt.tpe/tpe:842]: TPE using 22/22 trials with best loss 0.222078\n",
      "2017-11-01 12:00:18,144 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.23\n",
      "2017-11-01 12:00:18,154 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.18725080255903118 --l2 0.0002926528695193215 --l1 0.061311112340448025 --ngram 2 --passes 9 --loss_function squared --power_t 0.289468733879439 --bit_precision 25 \n",
      "2017-11-01 12:02:17,760 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:02:18,212 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.18725080255903118 --l2 0.0002926528695193215 --l1 0.061311112340448025 --ngram 2 --passes 9 --loss_function squared --power_t 0.289468733879439 --bit_precision 25 \n",
      "2017-11-01 12:02:18,214 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:02:18,217 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:00.072656\n",
      "2017-11-01 12:02:18,362 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.007139 seconds\n",
      "2017-11-01 12:02:18,366 INFO     [hyperopt.tpe/tpe:842]: TPE using 23/23 trials with best loss 0.222078\n",
      "2017-11-01 12:02:18,384 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.24\n",
      "2017-11-01 12:02:18,386 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.023447607926853173 --l2 0.012950492151889616 --ngram 2 --passes 9 --loss_function squared --power_t 0.2213965084135578 --bit_precision 25 \n",
      "2017-11-01 12:04:23,441 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:04:24,198 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.023447607926853173 --l2 0.012950492151889616 --ngram 2 --passes 9 --loss_function squared --power_t 0.2213965084135578 --bit_precision 25 \n",
      "2017-11-01 12:04:24,200 INFO     [root/vw-hyperopt:284]: loss value: 0.222822\n",
      "2017-11-01 12:04:24,202 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:05.818388\n",
      "2017-11-01 12:04:24,348 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.007742 seconds\n",
      "2017-11-01 12:04:24,350 INFO     [hyperopt.tpe/tpe:842]: TPE using 24/24 trials with best loss 0.222078\n",
      "2017-11-01 12:04:24,370 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.25\n",
      "2017-11-01 12:04:24,373 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.665061096252687 --l2 7.154712954417446e-06 --ngram 2 --passes 7 --loss_function squared --power_t 0.013345734951957067 --bit_precision 25 \n",
      "2017-11-01 12:05:51,763 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:05:52,558 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.665061096252687 --l2 7.154712954417446e-06 --ngram 2 --passes 7 --loss_function squared --power_t 0.013345734951957067 --bit_precision 25 \n",
      "2017-11-01 12:05:52,561 INFO     [root/vw-hyperopt:284]: loss value: 0.406918\n",
      "2017-11-01 12:05:52,562 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:28.192261\n",
      "2017-11-01 12:05:52,708 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005614 seconds\n",
      "2017-11-01 12:05:52,710 INFO     [hyperopt.tpe/tpe:842]: TPE using 25/25 trials with best loss 0.222078\n",
      "2017-11-01 12:05:52,730 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.26\n",
      "2017-11-01 12:05:52,732 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.10734200668839051 --l1 1.3248424555747733e-08 --ngram 2 --passes 10 --loss_function squared --power_t 0.8555692915651236 --bit_precision 25 \n",
      "2017-11-01 12:07:58,529 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:07:59,168 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.10734200668839051 --l1 1.3248424555747733e-08 --ngram 2 --passes 10 --loss_function squared --power_t 0.8555692915651236 --bit_precision 25 \n",
      "2017-11-01 12:07:59,170 INFO     [root/vw-hyperopt:284]: loss value: 0.262168\n",
      "2017-11-01 12:07:59,171 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:06.440882\n",
      "2017-11-01 12:07:59,336 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.013148 seconds\n",
      "2017-11-01 12:07:59,339 INFO     [hyperopt.tpe/tpe:842]: TPE using 26/26 trials with best loss 0.222078\n",
      "2017-11-01 12:07:59,367 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.27\n",
      "2017-11-01 12:07:59,373 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.05027365368663084 --l2 0.0001946048953632522 --ngram 2 --passes 8 --loss_function squared --power_t 0.6535629201656481 --bit_precision 25 \n",
      "2017-11-01 12:09:52,082 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:09:52,771 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.05027365368663084 --l2 0.0001946048953632522 --ngram 2 --passes 8 --loss_function squared --power_t 0.6535629201656481 --bit_precision 25 \n",
      "2017-11-01 12:09:52,773 INFO     [root/vw-hyperopt:284]: loss value: 0.270657\n",
      "2017-11-01 12:09:52,774 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:53.407628\n",
      "2017-11-01 12:09:52,913 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006949 seconds\n",
      "2017-11-01 12:09:52,916 INFO     [hyperopt.tpe/tpe:842]: TPE using 27/27 trials with best loss 0.222078\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 12:09:52,935 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.28\n",
      "2017-11-01 12:09:52,937 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.19894874997088893 --l2 0.009018642389801285 --l1 0.0003914241279528883 --ngram 2 --passes 9 --loss_function squared --power_t 0.8698646197922101 --bit_precision 25 \n",
      "2017-11-01 12:11:42,465 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:11:42,822 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.19894874997088893 --l2 0.009018642389801285 --l1 0.0003914241279528883 --ngram 2 --passes 9 --loss_function squared --power_t 0.8698646197922101 --bit_precision 25 \n",
      "2017-11-01 12:11:42,824 INFO     [root/vw-hyperopt:284]: loss value: 0.319035\n",
      "2017-11-01 12:11:42,828 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:49.892195\n",
      "2017-11-01 12:11:42,930 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005505 seconds\n",
      "2017-11-01 12:11:42,932 INFO     [hyperopt.tpe/tpe:842]: TPE using 28/28 trials with best loss 0.222078\n",
      "2017-11-01 12:11:42,949 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.29\n",
      "2017-11-01 12:11:42,951 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 3.2254060247881813 --l2 2.684030142051249e-06 --l1 2.1871876118690943e-07 --ngram 2 --passes 10 --loss_function squared --power_t 0.09288943165847807 --bit_precision 25 \n",
      "2017-11-01 12:13:36,355 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:13:37,431 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 3.2254060247881813 --l2 2.684030142051249e-06 --l1 2.1871876118690943e-07 --ngram 2 --passes 10 --loss_function squared --power_t 0.09288943165847807 --bit_precision 25 \n",
      "2017-11-01 12:13:37,455 INFO     [root/vw-hyperopt:284]: loss value: 0.416733\n",
      "2017-11-01 12:13:37,458 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:54.508821\n",
      "2017-11-01 12:13:37,602 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006363 seconds\n",
      "2017-11-01 12:13:37,611 INFO     [hyperopt.tpe/tpe:842]: TPE using 29/29 trials with best loss 0.222078\n",
      "2017-11-01 12:13:37,630 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.30\n",
      "2017-11-01 12:13:37,634 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.010253784994926726 --ngram 2 --passes 5 --loss_function squared --power_t 0.4278889732017267 --bit_precision 25 \n",
      "2017-11-01 12:14:58,223 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:14:59,371 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.010253784994926726 --ngram 2 --passes 5 --loss_function squared --power_t 0.4278889732017267 --bit_precision 25 \n",
      "2017-11-01 12:14:59,373 INFO     [root/vw-hyperopt:284]: loss value: 0.275266\n",
      "2017-11-01 12:14:59,384 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:21.753502\n",
      "2017-11-01 12:14:59,626 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005372 seconds\n",
      "2017-11-01 12:14:59,630 INFO     [hyperopt.tpe/tpe:842]: TPE using 30/30 trials with best loss 0.222078\n",
      "2017-11-01 12:14:59,661 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.31\n",
      "2017-11-01 12:14:59,662 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.7549880526320939 --l2 0.020336308670620716 --l1 4.403406677600157e-05 --ngram 2 --passes 7 --loss_function squared --power_t 0.2555443179387362 --bit_precision 25 \n",
      "2017-11-01 12:16:48,965 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:16:50,066 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.7549880526320939 --l2 0.020336308670620716 --l1 4.403406677600157e-05 --ngram 2 --passes 7 --loss_function squared --power_t 0.2555443179387362 --bit_precision 25 \n",
      "2017-11-01 12:16:50,075 INFO     [root/vw-hyperopt:284]: loss value: 0.270871\n",
      "2017-11-01 12:16:50,077 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:50.416250\n",
      "2017-11-01 12:16:50,316 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.018820 seconds\n",
      "2017-11-01 12:16:50,320 INFO     [hyperopt.tpe/tpe:842]: TPE using 31/31 trials with best loss 0.222078\n",
      "2017-11-01 12:16:50,353 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.32\n",
      "2017-11-01 12:16:50,374 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.018825697783766217 --l2 0.00013303768390044373 --ngram 2 --passes 6 --loss_function squared --power_t 0.5972970335804252 --bit_precision 25 \n",
      "2017-11-01 12:18:19,552 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:18:20,805 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.018825697783766217 --l2 0.00013303768390044373 --ngram 2 --passes 6 --loss_function squared --power_t 0.5972970335804252 --bit_precision 25 \n",
      "2017-11-01 12:18:20,834 INFO     [root/vw-hyperopt:284]: loss value: 0.271584\n",
      "2017-11-01 12:18:20,836 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:30.483582\n",
      "2017-11-01 12:18:21,087 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005928 seconds\n",
      "2017-11-01 12:18:21,094 INFO     [hyperopt.tpe/tpe:842]: TPE using 32/32 trials with best loss 0.222078\n",
      "2017-11-01 12:18:21,162 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.33\n",
      "2017-11-01 12:18:21,168 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.13501293575446327 --l2 5.736484890226781e-06 --ngram 2 --passes 8 --loss_function squared --power_t 0.17421827964671754 --bit_precision 25 \n",
      "2017-11-01 12:20:11,593 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:20:12,766 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.13501293575446327 --l2 5.736484890226781e-06 --ngram 2 --passes 8 --loss_function squared --power_t 0.17421827964671754 --bit_precision 25 \n",
      "2017-11-01 12:20:12,774 INFO     [root/vw-hyperopt:284]: loss value: 0.318945\n",
      "2017-11-01 12:20:12,801 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:51.638487\n",
      "2017-11-01 12:20:13,012 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.018833 seconds\n",
      "2017-11-01 12:20:13,021 INFO     [hyperopt.tpe/tpe:842]: TPE using 33/33 trials with best loss 0.222078\n",
      "2017-11-01 12:20:13,050 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.34\n",
      "2017-11-01 12:20:13,052 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.2810665255449206 --l1 9.063362609004528e-08 --ngram 2 --passes 4 --loss_function squared --power_t 0.4643810094170593 --bit_precision 25 \n",
      "2017-11-01 12:21:11,844 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:21:12,890 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.2810665255449206 --l1 9.063362609004528e-08 --ngram 2 --passes 4 --loss_function squared --power_t 0.4643810094170593 --bit_precision 25 \n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 12:21:12,892 INFO     [root/vw-hyperopt:284]: loss value: 0.315857\n",
      "2017-11-01 12:21:12,895 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:59.844249\n",
      "2017-11-01 12:21:13,108 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.013966 seconds\n",
      "2017-11-01 12:21:13,112 INFO     [hyperopt.tpe/tpe:842]: TPE using 34/34 trials with best loss 0.222078\n",
      "2017-11-01 12:21:13,140 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.35\n",
      "2017-11-01 12:21:13,151 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.571599509973544 --l2 0.0007448234328553491 --ngram 2 --passes 9 --loss_function squared --power_t 0.6854020078604 --bit_precision 25 \n",
      "2017-11-01 12:23:20,253 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:23:21,587 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.571599509973544 --l2 0.0007448234328553491 --ngram 2 --passes 9 --loss_function squared --power_t 0.6854020078604 --bit_precision 25 \n",
      "2017-11-01 12:23:21,604 INFO     [root/vw-hyperopt:284]: loss value: 0.262833\n",
      "2017-11-01 12:23:21,613 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:08.473399\n",
      "2017-11-01 12:23:21,848 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005283 seconds\n",
      "2017-11-01 12:23:21,853 INFO     [hyperopt.tpe/tpe:842]: TPE using 35/35 trials with best loss 0.222078\n",
      "2017-11-01 12:23:21,885 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.36\n",
      "2017-11-01 12:23:21,890 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.839903127894228 --l2 0.004763660907614437 --ngram 2 --passes 10 --loss_function squared --power_t 0.36599890842774746 --bit_precision 25 \n",
      "2017-11-01 12:25:47,700 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:25:48,309 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.839903127894228 --l2 0.004763660907614437 --ngram 2 --passes 10 --loss_function squared --power_t 0.36599890842774746 --bit_precision 25 \n",
      "2017-11-01 12:25:48,311 INFO     [root/vw-hyperopt:284]: loss value: 0.265000\n",
      "2017-11-01 12:25:48,312 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:26.427310\n",
      "2017-11-01 12:25:48,456 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005243 seconds\n",
      "2017-11-01 12:25:48,459 INFO     [hyperopt.tpe/tpe:842]: TPE using 36/36 trials with best loss 0.222078\n",
      "2017-11-01 12:25:48,478 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.37\n",
      "2017-11-01 12:25:48,481 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.014545276267847707 --l2 6.58575070798802e-07 --l1 0.07639858812347039 --ngram 2 --passes 1 --loss_function squared --power_t 0.5022661785292187 --bit_precision 25 \n",
      "2017-11-01 12:26:00,413 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:26:00,782 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.014545276267847707 --l2 6.58575070798802e-07 --l1 0.07639858812347039 --ngram 2 --passes 1 --loss_function squared --power_t 0.5022661785292187 --bit_precision 25 \n",
      "2017-11-01 12:26:00,783 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:26:00,785 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:12.306428\n",
      "2017-11-01 12:26:00,905 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006130 seconds\n",
      "2017-11-01 12:26:00,907 INFO     [hyperopt.tpe/tpe:842]: TPE using 37/37 trials with best loss 0.222078\n",
      "2017-11-01 12:26:00,933 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.38\n",
      "2017-11-01 12:26:00,935 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.1200160720096037 --l1 6.534705664075285e-06 --ngram 2 --passes 8 --loss_function squared --power_t 0.5731051279139144 --bit_precision 25 \n",
      "2017-11-01 12:27:34,476 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:27:34,862 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.1200160720096037 --l1 6.534705664075285e-06 --ngram 2 --passes 8 --loss_function squared --power_t 0.5731051279139144 --bit_precision 25 \n",
      "2017-11-01 12:27:34,863 INFO     [root/vw-hyperopt:284]: loss value: 0.247990\n",
      "2017-11-01 12:27:34,866 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:33.932600\n",
      "2017-11-01 12:27:34,980 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005485 seconds\n",
      "2017-11-01 12:27:34,982 INFO     [hyperopt.tpe/tpe:842]: TPE using 38/38 trials with best loss 0.222078\n",
      "2017-11-01 12:27:35,006 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.39\n",
      "2017-11-01 12:27:35,007 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.050975060162397744 --l2 6.123278525448562e-05 --ngram 2 --passes 5 --loss_function squared --power_t 0.8150578935979912 --bit_precision 25 \n",
      "2017-11-01 12:28:40,564 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:28:41,153 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.050975060162397744 --l2 6.123278525448562e-05 --ngram 2 --passes 5 --loss_function squared --power_t 0.8150578935979912 --bit_precision 25 \n",
      "2017-11-01 12:28:41,157 INFO     [root/vw-hyperopt:284]: loss value: 0.274793\n",
      "2017-11-01 12:28:41,159 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:06.153274\n",
      "2017-11-01 12:28:41,305 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005894 seconds\n",
      "2017-11-01 12:28:41,306 INFO     [hyperopt.tpe/tpe:842]: TPE using 39/39 trials with best loss 0.222078\n",
      "2017-11-01 12:28:41,322 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.40\n",
      "2017-11-01 12:28:41,323 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.32089277526560295 --l2 9.601179769215378e-08 --l1 0.0003273563853009612 --ngram 2 --passes 9 --loss_function squared --power_t 0.9224598685082692 --bit_precision 25 \n",
      "2017-11-01 12:30:26,040 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:30:26,403 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.32089277526560295 --l2 9.601179769215378e-08 --l1 0.0003273563853009612 --ngram 2 --passes 9 --loss_function squared --power_t 0.9224598685082692 --bit_precision 25 \n",
      "2017-11-01 12:30:26,416 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:30:26,421 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:45.099288\n",
      "2017-11-01 12:30:26,532 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005717 seconds\n",
      "2017-11-01 12:30:26,534 INFO     [hyperopt.tpe/tpe:842]: TPE using 40/40 trials with best loss 0.222078\n",
      "2017-11-01 12:30:26,555 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.41\n",
      "2017-11-01 12:30:26,557 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.08377689303096668 --l2 1.431668213005597e-06 --ngram 2 --passes 10 --loss_function squared --power_t 0.06494657822207217 --bit_precision 25 \n",
      "2017-11-01 12:32:25,407 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 12:32:26,014 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.08377689303096668 --l2 1.431668213005597e-06 --ngram 2 --passes 10 --loss_function squared --power_t 0.06494657822207217 --bit_precision 25 \n",
      "2017-11-01 12:32:26,016 INFO     [root/vw-hyperopt:284]: loss value: 0.340340\n",
      "2017-11-01 12:32:26,019 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:59.464158\n",
      "2017-11-01 12:32:26,163 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.017517 seconds\n",
      "2017-11-01 12:32:26,165 INFO     [hyperopt.tpe/tpe:842]: TPE using 41/41 trials with best loss 0.222078\n",
      "2017-11-01 12:32:26,183 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.42\n",
      "2017-11-01 12:32:26,184 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 2.793963723414218 --l1 8.78554820488186e-07 --ngram 2 --passes 6 --loss_function squared --power_t 0.7931566322593817 --bit_precision 25 \n",
      "2017-11-01 12:33:43,072 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:33:43,537 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 2.793963723414218 --l1 8.78554820488186e-07 --ngram 2 --passes 6 --loss_function squared --power_t 0.7931566322593817 --bit_precision 25 \n",
      "2017-11-01 12:33:43,539 INFO     [root/vw-hyperopt:284]: loss value: 0.233493\n",
      "2017-11-01 12:33:43,542 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:17.358370\n",
      "2017-11-01 12:33:43,656 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005462 seconds\n",
      "2017-11-01 12:33:43,659 INFO     [hyperopt.tpe/tpe:842]: TPE using 42/42 trials with best loss 0.222078\n",
      "2017-11-01 12:33:43,688 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.43\n",
      "2017-11-01 12:33:43,691 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.027853009516549246 --l2 1.3412532089101811e-05 --ngram 2 --passes 3 --loss_function squared --power_t 0.7075317975399508 --bit_precision 25 \n",
      "2017-11-01 12:34:29,497 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:34:30,098 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.027853009516549246 --l2 1.3412532089101811e-05 --ngram 2 --passes 3 --loss_function squared --power_t 0.7075317975399508 --bit_precision 25 \n",
      "2017-11-01 12:34:30,100 INFO     [root/vw-hyperopt:284]: loss value: 0.271441\n",
      "2017-11-01 12:34:30,103 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:46.415332\n",
      "2017-11-01 12:34:30,245 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005618 seconds\n",
      "2017-11-01 12:34:30,248 INFO     [hyperopt.tpe/tpe:842]: TPE using 43/43 trials with best loss 0.222078\n",
      "2017-11-01 12:34:30,267 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.44\n",
      "2017-11-01 12:34:30,269 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.4914050437608877 --l2 1.1016690210267063e-08 --l1 0.0024007633372470608 --ngram 2 --passes 4 --loss_function squared --power_t 0.6375239781752974 --bit_precision 25 \n",
      "2017-11-01 12:35:17,309 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:35:17,670 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.4914050437608877 --l2 1.1016690210267063e-08 --l1 0.0024007633372470608 --ngram 2 --passes 4 --loss_function squared --power_t 0.6375239781752974 --bit_precision 25 \n",
      "2017-11-01 12:35:17,672 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:35:17,673 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:47.406142\n",
      "2017-11-01 12:35:17,792 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005410 seconds\n",
      "2017-11-01 12:35:17,794 INFO     [hyperopt.tpe/tpe:842]: TPE using 44/44 trials with best loss 0.222078\n",
      "2017-11-01 12:35:17,822 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.45\n",
      "2017-11-01 12:35:17,824 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.16679214073198928 --ngram 2 --passes 5 --loss_function squared --power_t 0.4789647122655747 --bit_precision 25 \n",
      "2017-11-01 12:36:21,076 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:36:21,676 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.16679214073198928 --ngram 2 --passes 5 --loss_function squared --power_t 0.4789647122655747 --bit_precision 25 \n",
      "2017-11-01 12:36:21,678 INFO     [root/vw-hyperopt:284]: loss value: 0.312496\n",
      "2017-11-01 12:36:21,679 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:03.857619\n",
      "2017-11-01 12:36:21,847 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005875 seconds\n",
      "2017-11-01 12:36:21,849 INFO     [hyperopt.tpe/tpe:842]: TPE using 45/45 trials with best loss 0.222078\n",
      "2017-11-01 12:36:21,868 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.46\n",
      "2017-11-01 12:36:21,869 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.24550413134457386 --l2 0.0006511371176647887 --l1 2.0924080390725677e-05 --ngram 2 --passes 7 --loss_function squared --power_t 0.5406570336830807 --bit_precision 25 \n",
      "2017-11-01 12:37:44,454 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:37:44,833 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.24550413134457386 --l2 0.0006511371176647887 --l1 2.0924080390725677e-05 --ngram 2 --passes 7 --loss_function squared --power_t 0.5406570336830807 --bit_precision 25 \n",
      "2017-11-01 12:37:44,835 INFO     [root/vw-hyperopt:284]: loss value: 0.258552\n",
      "2017-11-01 12:37:44,839 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:22.971418\n",
      "2017-11-01 12:37:44,958 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005389 seconds\n",
      "2017-11-01 12:37:44,960 INFO     [hyperopt.tpe/tpe:842]: TPE using 46/46 trials with best loss 0.222078\n",
      "2017-11-01 12:37:44,980 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.47\n",
      "2017-11-01 12:37:44,990 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.047132431603619726 --l2 1.067301130236451e-06 --ngram 2 --passes 9 --loss_function squared --power_t 0.2989797579124236 --bit_precision 25 \n",
      "2017-11-01 12:39:36,279 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:39:36,835 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.047132431603619726 --l2 1.067301130236451e-06 --ngram 2 --passes 9 --loss_function squared --power_t 0.2989797579124236 --bit_precision 25 \n",
      "2017-11-01 12:39:36,838 INFO     [root/vw-hyperopt:284]: loss value: 0.317676\n",
      "2017-11-01 12:39:36,841 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:51.861642\n",
      "2017-11-01 12:39:36,956 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.007354 seconds\n",
      "2017-11-01 12:39:36,962 INFO     [hyperopt.tpe/tpe:842]: TPE using 47/47 trials with best loss 0.222078\n",
      "2017-11-01 12:39:36,982 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.48\n",
      "2017-11-01 12:39:36,984 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.4112445117298063 --l2 2.309759855599042e-07 --l1 7.017988036228277e-07 --ngram 2 --passes 1 --loss_function squared --power_t 0.4181499409383732 --bit_precision 25 \n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 12:39:49,927 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:39:50,342 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.4112445117298063 --l2 2.309759855599042e-07 --l1 7.017988036228277e-07 --ngram 2 --passes 1 --loss_function squared --power_t 0.4181499409383732 --bit_precision 25 \n",
      "2017-11-01 12:39:50,344 INFO     [root/vw-hyperopt:284]: loss value: 0.283118\n",
      "2017-11-01 12:39:50,354 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:13.364614\n",
      "2017-11-01 12:39:50,465 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005207 seconds\n",
      "2017-11-01 12:39:50,467 INFO     [hyperopt.tpe/tpe:842]: TPE using 48/48 trials with best loss 0.222078\n",
      "2017-11-01 12:39:50,495 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.49\n",
      "2017-11-01 12:39:50,497 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.07137288485683516 --ngram 2 --passes 8 --loss_function squared --power_t 0.2005305127522417 --bit_precision 25 \n",
      "2017-11-01 12:41:27,611 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:41:28,197 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.07137288485683516 --ngram 2 --passes 8 --loss_function squared --power_t 0.2005305127522417 --bit_precision 25 \n",
      "2017-11-01 12:41:28,198 INFO     [root/vw-hyperopt:284]: loss value: 0.300666\n",
      "2017-11-01 12:41:28,209 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:37.713309\n",
      "2017-11-01 12:41:28,355 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.018074 seconds\n",
      "2017-11-01 12:41:28,357 INFO     [hyperopt.tpe/tpe:842]: TPE using 49/49 trials with best loss 0.222078\n",
      "2017-11-01 12:41:28,376 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.50\n",
      "2017-11-01 12:41:28,378 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.499833615463356 --l2 0.039744980797669964 --l1 0.02288907311979918 --ngram 2 --passes 10 --loss_function squared --power_t 0.3751392905828332 --bit_precision 25 \n",
      "2017-11-01 12:44:08,247 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:44:08,626 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.499833615463356 --l2 0.039744980797669964 --l1 0.02288907311979918 --ngram 2 --passes 10 --loss_function squared --power_t 0.3751392905828332 --bit_precision 25 \n",
      "2017-11-01 12:44:08,628 INFO     [root/vw-hyperopt:284]: loss value: 0.214948\n",
      "2017-11-01 12:44:08,629 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:40.253037\n",
      "2017-11-01 12:44:08,754 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005426 seconds\n",
      "2017-11-01 12:44:08,756 INFO     [hyperopt.tpe/tpe:842]: TPE using 50/50 trials with best loss 0.214948\n",
      "2017-11-01 12:44:08,773 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.51\n",
      "2017-11-01 12:44:08,774 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 6.183206373160488 --l2 0.04816525275060894 --ngram 2 --passes 7 --loss_function squared --power_t 0.9301503376420177 --bit_precision 25 \n",
      "2017-11-01 12:45:48,524 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:45:49,024 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 6.183206373160488 --l2 0.04816525275060894 --ngram 2 --passes 7 --loss_function squared --power_t 0.9301503376420177 --bit_precision 25 \n",
      "2017-11-01 12:45:49,026 INFO     [root/vw-hyperopt:284]: loss value: 0.294030\n",
      "2017-11-01 12:45:49,044 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:40.270528\n",
      "2017-11-01 12:45:49,190 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005246 seconds\n",
      "2017-11-01 12:45:49,192 INFO     [hyperopt.tpe/tpe:842]: TPE using 51/51 trials with best loss 0.214948\n",
      "2017-11-01 12:45:49,222 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.52\n",
      "2017-11-01 12:45:49,224 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 9.963175829567923 --l2 0.0243881313635684 --l1 0.061923499985624936 --ngram 2 --passes 8 --loss_function squared --power_t 0.5743238249482877 --bit_precision 25 \n",
      "2017-11-01 12:47:39,861 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:47:40,242 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 9.963175829567923 --l2 0.0243881313635684 --l1 0.061923499985624936 --ngram 2 --passes 8 --loss_function squared --power_t 0.5743238249482877 --bit_precision 25 \n",
      "2017-11-01 12:47:40,244 INFO     [root/vw-hyperopt:284]: loss value: 0.232508\n",
      "2017-11-01 12:47:40,246 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:51.023633\n",
      "2017-11-01 12:47:40,356 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005392 seconds\n",
      "2017-11-01 12:47:40,358 INFO     [hyperopt.tpe/tpe:842]: TPE using 52/52 trials with best loss 0.214948\n",
      "2017-11-01 12:47:40,385 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.53\n",
      "2017-11-01 12:47:40,387 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 4.154034970984713 --l2 0.004189132635071206 --ngram 2 --passes 9 --loss_function squared --power_t 0.38913704263164534 --bit_precision 25 \n",
      "2017-11-01 12:49:42,666 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:49:43,266 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 4.154034970984713 --l2 0.004189132635071206 --ngram 2 --passes 9 --loss_function squared --power_t 0.38913704263164534 --bit_precision 25 \n",
      "2017-11-01 12:49:43,268 INFO     [root/vw-hyperopt:284]: loss value: 0.254041\n",
      "2017-11-01 12:49:43,270 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:02.884856\n",
      "2017-11-01 12:49:43,429 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.029139 seconds\n",
      "2017-11-01 12:49:43,431 INFO     [hyperopt.tpe/tpe:842]: TPE using 53/53 trials with best loss 0.214948\n",
      "2017-11-01 12:49:43,467 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.54\n",
      "2017-11-01 12:49:43,481 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.5997295418325226 --l1 0.013189790996822092 --ngram 2 --passes 3 --loss_function squared --power_t 0.12937087063316882 --bit_precision 25 \n",
      "2017-11-01 12:50:18,353 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:50:18,694 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.5997295418325226 --l1 0.013189790996822092 --ngram 2 --passes 3 --loss_function squared --power_t 0.12937087063316882 --bit_precision 25 \n",
      "2017-11-01 12:50:18,697 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:50:18,699 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:35.232343\n",
      "2017-11-01 12:50:18,814 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.009919 seconds\n",
      "2017-11-01 12:50:18,816 INFO     [hyperopt.tpe/tpe:842]: TPE using 54/54 trials with best loss 0.214948\n",
      "2017-11-01 12:50:18,836 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.55\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 12:50:18,838 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.9164534036926958 --l2 0.09174592724840162 --ngram 2 --passes 6 --loss_function squared --power_t 0.306961640735294 --bit_precision 25 \n",
      "2017-11-01 12:52:27,379 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:52:27,818 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.9164534036926958 --l2 0.09174592724840162 --ngram 2 --passes 6 --loss_function squared --power_t 0.306961640735294 --bit_precision 25 \n",
      "2017-11-01 12:52:27,820 INFO     [root/vw-hyperopt:284]: loss value: 0.215604\n",
      "2017-11-01 12:52:27,822 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:08.985799\n",
      "2017-11-01 12:52:27,967 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.011492 seconds\n",
      "2017-11-01 12:52:27,974 INFO     [hyperopt.tpe/tpe:842]: TPE using 55/55 trials with best loss 0.214948\n",
      "2017-11-01 12:52:28,006 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.56\n",
      "2017-11-01 12:52:28,010 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 2.0946165295993384 --l2 0.03757387166755166 --l1 0.001194306390240843 --ngram 2 --passes 2 --loss_function squared --power_t 0.244409360411663 --bit_precision 25 \n",
      "2017-11-01 12:53:00,599 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:53:00,987 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 2.0946165295993384 --l2 0.03757387166755166 --l1 0.001194306390240843 --ngram 2 --passes 2 --loss_function squared --power_t 0.244409360411663 --bit_precision 25 \n",
      "2017-11-01 12:53:00,991 INFO     [root/vw-hyperopt:284]: loss value: 0.222837\n",
      "2017-11-01 12:53:00,994 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:32.988193\n",
      "2017-11-01 12:53:01,116 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.007434 seconds\n",
      "2017-11-01 12:53:01,120 INFO     [hyperopt.tpe/tpe:842]: TPE using 56/56 trials with best loss 0.214948\n",
      "2017-11-01 12:53:01,140 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.57\n",
      "2017-11-01 12:53:01,143 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.995110491423865 --l2 0.008724528721940059 --ngram 2 --passes 6 --loss_function squared --power_t 0.28732863612295556 --bit_precision 25 \n",
      "2017-11-01 12:54:31,094 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:54:31,645 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.995110491423865 --l2 0.008724528721940059 --ngram 2 --passes 6 --loss_function squared --power_t 0.28732863612295556 --bit_precision 25 \n",
      "2017-11-01 12:54:31,647 INFO     [root/vw-hyperopt:284]: loss value: 0.290623\n",
      "2017-11-01 12:54:31,649 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:30.509398\n",
      "2017-11-01 12:54:31,789 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005433 seconds\n",
      "2017-11-01 12:54:31,792 INFO     [hyperopt.tpe/tpe:842]: TPE using 57/57 trials with best loss 0.214948\n",
      "2017-11-01 12:54:31,812 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.58\n",
      "2017-11-01 12:54:31,814 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.8132736855203166 --l1 0.00531995952403377 --ngram 2 --passes 3 --loss_function squared --power_t 0.10862543681620063 --bit_precision 25 \n",
      "2017-11-01 12:55:06,730 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:55:07,156 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.8132736855203166 --l1 0.00531995952403377 --ngram 2 --passes 3 --loss_function squared --power_t 0.10862543681620063 --bit_precision 25 \n",
      "2017-11-01 12:55:07,169 INFO     [root/vw-hyperopt:284]: loss value: 0.319039\n",
      "2017-11-01 12:55:07,175 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:35.362695\n",
      "2017-11-01 12:55:07,285 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005399 seconds\n",
      "2017-11-01 12:55:07,287 INFO     [hyperopt.tpe/tpe:842]: TPE using 58/58 trials with best loss 0.214948\n",
      "2017-11-01 12:55:07,305 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.59\n",
      "2017-11-01 12:55:07,306 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.4202583136271942 --l2 0.09063591592661523 --ngram 2 --passes 4 --loss_function squared --power_t 0.06072645403690513 --bit_precision 25 \n",
      "2017-11-01 12:56:58,377 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:56:58,789 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.4202583136271942 --l2 0.09063591592661523 --ngram 2 --passes 4 --loss_function squared --power_t 0.06072645403690513 --bit_precision 25 \n",
      "2017-11-01 12:56:58,792 INFO     [root/vw-hyperopt:284]: loss value: 0.250625\n",
      "2017-11-01 12:56:58,793 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:51.488420\n",
      "2017-11-01 12:56:58,903 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005425 seconds\n",
      "2017-11-01 12:56:58,905 INFO     [hyperopt.tpe/tpe:842]: TPE using 59/59 trials with best loss 0.214948\n",
      "2017-11-01 12:56:58,942 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.60\n",
      "2017-11-01 12:56:58,943 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 4.778288247512726 --l2 0.0012427249508755003 --l1 0.03501431309372747 --ngram 2 --passes 2 --loss_function squared --power_t 0.3171168379652677 --bit_precision 25 \n",
      "2017-11-01 12:57:28,345 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 12:57:28,828 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 4.778288247512726 --l2 0.0012427249508755003 --l1 0.03501431309372747 --ngram 2 --passes 2 --loss_function squared --power_t 0.3171168379652677 --bit_precision 25 \n",
      "2017-11-01 12:57:28,830 INFO     [root/vw-hyperopt:284]: loss value: 0.280992\n",
      "2017-11-01 12:57:28,831 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:29.889791\n",
      "2017-11-01 12:57:28,942 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005303 seconds\n",
      "2017-11-01 12:57:28,943 INFO     [hyperopt.tpe/tpe:842]: TPE using 60/60 trials with best loss 0.214948\n",
      "2017-11-01 12:57:28,983 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.61\n",
      "2017-11-01 12:57:28,985 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 9.121483131960389 --l2 0.08097913763403942 --ngram 2 --passes 6 --loss_function squared --power_t 0.1786206734053912 --bit_precision 25 \n",
      "2017-11-01 13:00:50,197 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:00:50,612 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 9.121483131960389 --l2 0.08097913763403942 --ngram 2 --passes 6 --loss_function squared --power_t 0.1786206734053912 --bit_precision 25 \n",
      "2017-11-01 13:00:50,614 INFO     [root/vw-hyperopt:284]: loss value: 0.222794\n",
      "2017-11-01 13:00:50,617 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:03:21.633968\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 13:00:50,731 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.009509 seconds\n",
      "2017-11-01 13:00:50,733 INFO     [hyperopt.tpe/tpe:842]: TPE using 61/61 trials with best loss 0.214948\n",
      "2017-11-01 13:00:50,753 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.62\n",
      "2017-11-01 13:00:50,754 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 7.046651625533099 --l2 0.00041436680340823533 --l1 0.00011049375780983791 --ngram 2 --passes 5 --loss_function squared --power_t 0.36800793335420817 --bit_precision 25 \n",
      "2017-11-01 13:01:49,677 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:01:50,106 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 7.046651625533099 --l2 0.00041436680340823533 --l1 0.00011049375780983791 --ngram 2 --passes 5 --loss_function squared --power_t 0.36800793335420817 --bit_precision 25 \n",
      "2017-11-01 13:01:50,107 INFO     [root/vw-hyperopt:284]: loss value: 0.253631\n",
      "2017-11-01 13:01:50,109 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:59.356046\n",
      "2017-11-01 13:01:50,250 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.022399 seconds\n",
      "2017-11-01 13:01:50,252 INFO     [hyperopt.tpe/tpe:842]: TPE using 62/62 trials with best loss 0.214948\n",
      "2017-11-01 13:01:50,270 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.63\n",
      "2017-11-01 13:01:50,271 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 2.391992707764102 --ngram 2 --passes 4 --loss_function squared --power_t 0.24457175893082073 --bit_precision 25 \n",
      "2017-11-01 13:02:42,342 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:02:42,939 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 2.391992707764102 --ngram 2 --passes 4 --loss_function squared --power_t 0.24457175893082073 --bit_precision 25 \n",
      "2017-11-01 13:02:42,940 INFO     [root/vw-hyperopt:284]: loss value: 0.365639\n",
      "2017-11-01 13:02:42,942 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:52.672166\n",
      "2017-11-01 13:02:43,079 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005100 seconds\n",
      "2017-11-01 13:02:43,081 INFO     [hyperopt.tpe/tpe:842]: TPE using 63/63 trials with best loss 0.214948\n",
      "2017-11-01 13:02:43,100 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.64\n",
      "2017-11-01 13:02:43,101 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 3.8762245904078494 --l2 9.03163796379374e-05 --l1 3.5607356563719475e-08 --ngram 2 --passes 7 --loss_function squared --power_t 0.4618258683322539 --bit_precision 25 \n",
      "2017-11-01 13:04:16,880 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:04:17,424 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 3.8762245904078494 --l2 9.03163796379374e-05 --l1 3.5607356563719475e-08 --ngram 2 --passes 7 --loss_function squared --power_t 0.4618258683322539 --bit_precision 25 \n",
      "2017-11-01 13:04:17,426 INFO     [root/vw-hyperopt:284]: loss value: 0.266910\n",
      "2017-11-01 13:04:17,428 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:34.327710\n",
      "2017-11-01 13:04:17,558 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005515 seconds\n",
      "2017-11-01 13:04:17,560 INFO     [hyperopt.tpe/tpe:842]: TPE using 64/64 trials with best loss 0.214948\n",
      "2017-11-01 13:04:17,601 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.65\n",
      "2017-11-01 13:04:17,603 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.9167049358674177 --l2 0.026451689298250435 --ngram 2 --passes 1 --loss_function squared --power_t 0.03962790586951648 --bit_precision 25 \n",
      "2017-11-01 13:04:36,885 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:04:37,350 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.9167049358674177 --l2 0.026451689298250435 --ngram 2 --passes 1 --loss_function squared --power_t 0.03962790586951648 --bit_precision 25 \n",
      "2017-11-01 13:04:37,352 INFO     [root/vw-hyperopt:284]: loss value: 0.345165\n",
      "2017-11-01 13:04:37,353 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:00:19.752240\n",
      "2017-11-01 13:04:37,471 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005460 seconds\n",
      "2017-11-01 13:04:37,473 INFO     [hyperopt.tpe/tpe:842]: TPE using 65/65 trials with best loss 0.214948\n",
      "2017-11-01 13:04:37,491 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.66\n",
      "2017-11-01 13:04:37,492 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.3692875459524928 --l2 0.004648516576045691 --ngram 2 --passes 10 --loss_function squared --power_t 0.5201980343452391 --bit_precision 25 \n",
      "2017-11-01 13:06:46,772 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:06:47,363 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.3692875459524928 --l2 0.004648516576045691 --ngram 2 --passes 10 --loss_function squared --power_t 0.5201980343452391 --bit_precision 25 \n",
      "2017-11-01 13:06:47,367 INFO     [root/vw-hyperopt:284]: loss value: 0.236297\n",
      "2017-11-01 13:06:47,370 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:09.878707\n",
      "2017-11-01 13:06:47,519 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005293 seconds\n",
      "2017-11-01 13:06:47,521 INFO     [hyperopt.tpe/tpe:842]: TPE using 66/66 trials with best loss 0.214948\n",
      "2017-11-01 13:06:47,545 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.67\n",
      "2017-11-01 13:06:47,546 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.6280456486363087 --l2 0.002294725341424364 --ngram 2 --passes 8 --loss_function squared --power_t 0.7486122895292996 --bit_precision 25 \n",
      "2017-11-01 13:08:31,516 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:08:32,141 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.6280456486363087 --l2 0.002294725341424364 --ngram 2 --passes 8 --loss_function squared --power_t 0.7486122895292996 --bit_precision 25 \n",
      "2017-11-01 13:08:32,142 INFO     [root/vw-hyperopt:284]: loss value: 0.229972\n",
      "2017-11-01 13:08:32,146 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:44.601084\n",
      "2017-11-01 13:08:32,281 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.007976 seconds\n",
      "2017-11-01 13:08:32,282 INFO     [hyperopt.tpe/tpe:842]: TPE using 67/67 trials with best loss 0.214948\n",
      "2017-11-01 13:08:32,319 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.68\n",
      "2017-11-01 13:08:32,321 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 1.3597771560322678 --l2 0.01673873646486071 --ngram 2 --passes 10 --loss_function squared --power_t 0.6599346512660507 --bit_precision 25 \n",
      "2017-11-01 13:10:51,941 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:10:52,517 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 1.3597771560322678 --l2 0.01673873646486071 --ngram 2 --passes 10 --loss_function squared --power_t 0.6599346512660507 --bit_precision 25 \n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 13:10:52,519 INFO     [root/vw-hyperopt:284]: loss value: 0.225654\n",
      "2017-11-01 13:10:52,523 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:20.203779\n",
      "2017-11-01 13:10:52,689 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.012958 seconds\n",
      "2017-11-01 13:10:52,691 INFO     [hyperopt.tpe/tpe:842]: TPE using 68/68 trials with best loss 0.214948\n",
      "2017-11-01 13:10:52,713 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.69\n",
      "2017-11-01 13:10:52,714 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.23433510113427503 --l2 0.008445302169332765 --ngram 2 --passes 9 --loss_function squared --power_t 0.6095679241648939 --bit_precision 25 \n",
      "2017-11-01 13:12:50,729 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:12:51,318 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.23433510113427503 --l2 0.008445302169332765 --ngram 2 --passes 9 --loss_function squared --power_t 0.6095679241648939 --bit_precision 25 \n",
      "2017-11-01 13:12:51,320 INFO     [root/vw-hyperopt:284]: loss value: 0.212817\n",
      "2017-11-01 13:12:51,322 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:58.609374\n",
      "2017-11-01 13:12:51,469 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006371 seconds\n",
      "2017-11-01 13:12:51,471 INFO     [hyperopt.tpe/tpe:842]: TPE using 69/69 trials with best loss 0.212817\n",
      "2017-11-01 13:12:51,492 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.70\n",
      "2017-11-01 13:12:51,493 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.5471590612625978 --l2 0.00902951267248553 --ngram 2 --passes 9 --loss_function squared --power_t 0.6165585370504322 --bit_precision 25 \n",
      "2017-11-01 13:14:52,830 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:14:53,426 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.5471590612625978 --l2 0.00902951267248553 --ngram 2 --passes 9 --loss_function squared --power_t 0.6165585370504322 --bit_precision 25 \n",
      "2017-11-01 13:14:53,428 INFO     [root/vw-hyperopt:284]: loss value: 0.211683\n",
      "2017-11-01 13:14:53,431 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:01.938810\n",
      "2017-11-01 13:14:53,570 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006888 seconds\n",
      "2017-11-01 13:14:53,571 INFO     [hyperopt.tpe/tpe:842]: TPE using 70/70 trials with best loss 0.211683\n",
      "2017-11-01 13:14:53,592 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.71\n",
      "2017-11-01 13:14:53,593 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.5479169386376822 --l2 0.008004513953242812 --ngram 2 --passes 9 --loss_function squared --power_t 0.6070770410870611 --bit_precision 25 \n",
      "2017-11-01 13:16:53,128 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:16:53,732 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.5479169386376822 --l2 0.008004513953242812 --ngram 2 --passes 9 --loss_function squared --power_t 0.6070770410870611 --bit_precision 25 \n",
      "2017-11-01 13:16:53,734 INFO     [root/vw-hyperopt:284]: loss value: 0.213359\n",
      "2017-11-01 13:16:53,738 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:00.145700\n",
      "2017-11-01 13:16:53,869 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005717 seconds\n",
      "2017-11-01 13:16:53,871 INFO     [hyperopt.tpe/tpe:842]: TPE using 71/71 trials with best loss 0.211683\n",
      "2017-11-01 13:16:53,916 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.72\n",
      "2017-11-01 13:16:53,918 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.24645721105111368 --l2 0.006424758211601414 --ngram 2 --passes 9 --loss_function squared --power_t 0.6117966875628454 --bit_precision 25 \n",
      "2017-11-01 13:18:55,352 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:18:55,991 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.24645721105111368 --l2 0.006424758211601414 --ngram 2 --passes 9 --loss_function squared --power_t 0.6117966875628454 --bit_precision 25 \n",
      "2017-11-01 13:18:55,993 INFO     [root/vw-hyperopt:284]: loss value: 0.216863\n",
      "2017-11-01 13:18:55,997 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:02.080163\n",
      "2017-11-01 13:18:56,131 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006804 seconds\n",
      "2017-11-01 13:18:56,134 INFO     [hyperopt.tpe/tpe:842]: TPE using 72/72 trials with best loss 0.211683\n",
      "2017-11-01 13:18:56,157 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.73\n",
      "2017-11-01 13:18:56,159 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.10236068960583573 --l2 0.0016427596127230625 --ngram 2 --passes 8 --loss_function squared --power_t 0.7921350544178739 --bit_precision 25 \n",
      "2017-11-01 13:20:43,739 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:20:44,322 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.10236068960583573 --l2 0.0016427596127230625 --ngram 2 --passes 8 --loss_function squared --power_t 0.7921350544178739 --bit_precision 25 \n",
      "2017-11-01 13:20:44,324 INFO     [root/vw-hyperopt:284]: loss value: 0.243460\n",
      "2017-11-01 13:20:44,326 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:48.168935\n",
      "2017-11-01 13:20:44,481 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.010418 seconds\n",
      "2017-11-01 13:20:44,483 INFO     [hyperopt.tpe/tpe:842]: TPE using 73/73 trials with best loss 0.211683\n",
      "2017-11-01 13:20:44,505 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.74\n",
      "2017-11-01 13:20:44,507 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.518890723844263 --l2 0.0003513741544093691 --ngram 2 --passes 9 --loss_function squared --power_t 0.7113980138704898 --bit_precision 25 \n",
      "2017-11-01 13:22:41,754 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:22:42,322 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.518890723844263 --l2 0.0003513741544093691 --ngram 2 --passes 9 --loss_function squared --power_t 0.7113980138704898 --bit_precision 25 \n",
      "2017-11-01 13:22:42,325 INFO     [root/vw-hyperopt:284]: loss value: 0.261848\n",
      "2017-11-01 13:22:42,328 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:57.822687\n",
      "2017-11-01 13:22:42,461 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.009509 seconds\n",
      "2017-11-01 13:22:42,463 INFO     [hyperopt.tpe/tpe:842]: TPE using 74/74 trials with best loss 0.211683\n",
      "2017-11-01 13:22:42,483 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.75\n",
      "2017-11-01 13:22:42,485 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.14416322084735944 --l2 0.013076657052956528 --ngram 2 --passes 8 --loss_function squared --power_t 0.5673548201328373 --bit_precision 25 \n",
      "2017-11-01 13:24:32,050 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 13:24:32,646 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.14416322084735944 --l2 0.013076657052956528 --ngram 2 --passes 8 --loss_function squared --power_t 0.5673548201328373 --bit_precision 25 \n",
      "2017-11-01 13:24:32,648 INFO     [root/vw-hyperopt:284]: loss value: 0.211586\n",
      "2017-11-01 13:24:32,655 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:50.172443\n",
      "2017-11-01 13:24:32,767 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005558 seconds\n",
      "2017-11-01 13:24:32,769 INFO     [hyperopt.tpe/tpe:842]: TPE using 75/75 trials with best loss 0.211586\n",
      "2017-11-01 13:24:32,794 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.76\n",
      "2017-11-01 13:24:32,796 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.14951904463800159 --l2 0.013844479188561843 --ngram 2 --passes 8 --loss_function squared --power_t 0.6859903067373448 --bit_precision 25 \n",
      "2017-11-01 13:26:20,582 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:26:21,302 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.14951904463800159 --l2 0.013844479188561843 --ngram 2 --passes 8 --loss_function squared --power_t 0.6859903067373448 --bit_precision 25 \n",
      "2017-11-01 13:26:21,304 INFO     [root/vw-hyperopt:284]: loss value: 0.216715\n",
      "2017-11-01 13:26:21,305 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:48.510984\n",
      "2017-11-01 13:26:21,454 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006382 seconds\n",
      "2017-11-01 13:26:21,456 INFO     [hyperopt.tpe/tpe:842]: TPE using 76/76 trials with best loss 0.211586\n",
      "2017-11-01 13:26:21,488 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.77\n",
      "2017-11-01 13:26:21,490 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.10473032822287506 --l2 0.002751275209601043 --ngram 2 --passes 7 --loss_function squared --power_t 0.5645067944431356 --bit_precision 25 \n",
      "2017-11-01 13:27:56,185 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:27:56,870 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.10473032822287506 --l2 0.002751275209601043 --ngram 2 --passes 7 --loss_function squared --power_t 0.5645067944431356 --bit_precision 25 \n",
      "2017-11-01 13:27:56,872 INFO     [root/vw-hyperopt:284]: loss value: 0.240148\n",
      "2017-11-01 13:27:56,874 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:35.385478\n",
      "2017-11-01 13:27:57,031 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.023640 seconds\n",
      "2017-11-01 13:27:57,033 INFO     [hyperopt.tpe/tpe:842]: TPE using 77/77 trials with best loss 0.211586\n",
      "2017-11-01 13:27:57,053 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.78\n",
      "2017-11-01 13:27:57,054 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.04056945998174269 --l2 0.000910893244688704 --ngram 2 --passes 8 --loss_function squared --power_t 0.9936803416333644 --bit_precision 25 \n",
      "2017-11-01 13:29:44,167 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:29:44,839 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.04056945998174269 --l2 0.000910893244688704 --ngram 2 --passes 8 --loss_function squared --power_t 0.9936803416333644 --bit_precision 25 \n",
      "2017-11-01 13:29:44,841 INFO     [root/vw-hyperopt:284]: loss value: 0.248606\n",
      "2017-11-01 13:29:44,848 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:47.795754\n",
      "2017-11-01 13:29:44,968 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.009423 seconds\n",
      "2017-11-01 13:29:44,970 INFO     [hyperopt.tpe/tpe:842]: TPE using 78/78 trials with best loss 0.211586\n",
      "2017-11-01 13:29:44,997 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.79\n",
      "2017-11-01 13:29:44,999 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.20289916299733632 --ngram 2 --passes 10 --loss_function squared --power_t 0.828775277646276 --bit_precision 25 \n",
      "2017-11-01 13:31:40,675 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:31:41,412 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.20289916299733632 --ngram 2 --passes 10 --loss_function squared --power_t 0.828775277646276 --bit_precision 25 \n",
      "2017-11-01 13:31:41,417 INFO     [root/vw-hyperopt:284]: loss value: 0.258635\n",
      "2017-11-01 13:31:41,419 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:56.422498\n",
      "2017-11-01 13:31:41,541 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.008600 seconds\n",
      "2017-11-01 13:31:41,543 INFO     [hyperopt.tpe/tpe:842]: TPE using 79/79 trials with best loss 0.211586\n",
      "2017-11-01 13:31:41,572 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.80\n",
      "2017-11-01 13:31:41,574 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.06265577632676292 --l2 6.153740530712802e-05 --ngram 2 --passes 10 --loss_function squared --power_t 0.6332010342421721 --bit_precision 25 \n",
      "2017-11-01 13:33:55,916 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:33:56,953 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.06265577632676292 --l2 6.153740530712802e-05 --ngram 2 --passes 10 --loss_function squared --power_t 0.6332010342421721 --bit_precision 25 \n",
      "2017-11-01 13:33:56,958 INFO     [root/vw-hyperopt:284]: loss value: 0.280347\n",
      "2017-11-01 13:33:56,964 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:15.392404\n",
      "2017-11-01 13:33:57,122 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006074 seconds\n",
      "2017-11-01 13:33:57,126 INFO     [hyperopt.tpe/tpe:842]: TPE using 80/80 trials with best loss 0.211586\n",
      "2017-11-01 13:33:57,152 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.81\n",
      "2017-11-01 13:33:57,154 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.2583170492257697 --l2 2.1965206082258962e-05 --ngram 2 --passes 7 --loss_function squared --power_t 0.4851592259442419 --bit_precision 25 \n",
      "2017-11-01 13:35:32,621 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:35:33,613 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.2583170492257697 --l2 2.1965206082258962e-05 --ngram 2 --passes 7 --loss_function squared --power_t 0.4851592259442419 --bit_precision 25 \n",
      "2017-11-01 13:35:33,634 INFO     [root/vw-hyperopt:284]: loss value: 0.290276\n",
      "2017-11-01 13:35:33,640 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:36.487412\n",
      "2017-11-01 13:35:33,790 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.005548 seconds\n",
      "2017-11-01 13:35:33,792 INFO     [hyperopt.tpe/tpe:842]: TPE using 81/81 trials with best loss 0.211586\n",
      "2017-11-01 13:35:33,855 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.82\n",
      "2017-11-01 13:35:33,862 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.1723072922630768 --l2 0.0001911226306365608 --ngram 2 --passes 9 --loss_function squared --power_t 0.9031101877408576 --bit_precision 25 \n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "2017-11-01 13:37:32,956 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:37:33,620 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.1723072922630768 --l2 0.0001911226306365608 --ngram 2 --passes 9 --loss_function squared --power_t 0.9031101877408576 --bit_precision 25 \n",
      "2017-11-01 13:37:33,624 INFO     [root/vw-hyperopt:284]: loss value: 0.257816\n",
      "2017-11-01 13:37:33,629 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:59.774089\n",
      "2017-11-01 13:37:33,755 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006001 seconds\n",
      "2017-11-01 13:37:33,757 INFO     [hyperopt.tpe/tpe:842]: TPE using 82/82 trials with best loss 0.211586\n",
      "2017-11-01 13:37:33,781 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.83\n",
      "2017-11-01 13:37:33,783 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.08635146405081875 --ngram 2 --passes 7 --loss_function squared --power_t 0.5204033056668929 --bit_precision 25 \n",
      "2017-11-01 13:39:04,069 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:39:04,715 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.08635146405081875 --ngram 2 --passes 7 --loss_function squared --power_t 0.5204033056668929 --bit_precision 25 \n",
      "2017-11-01 13:39:04,717 INFO     [root/vw-hyperopt:284]: loss value: 0.296558\n",
      "2017-11-01 13:39:04,719 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:01:30.938373\n",
      "2017-11-01 13:39:04,833 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.006081 seconds\n",
      "2017-11-01 13:39:04,835 INFO     [hyperopt.tpe/tpe:842]: TPE using 83/83 trials with best loss 0.211586\n",
      "2017-11-01 13:39:04,856 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.84\n",
      "2017-11-01 13:39:04,858 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.3126975508778548 --l2 0.000608657550260241 --ngram 2 --passes 9 --loss_function squared --power_t 0.7740931688849082 --bit_precision 25 \n",
      "2017-11-01 13:41:13,003 INFO     [root/vw-hyperopt:236]: executing the following command (validation): vw -t -d ../../data/arktur_medium//part_valid.vw -i ./current.model -p ./holdout.pred --holdout_off -c\n",
      "2017-11-01 13:41:13,594 INFO     [root/vw-hyperopt:283]: parameter suffix: -l 0.3126975508778548 --l2 0.000608657550260241 --ngram 2 --passes 9 --loss_function squared --power_t 0.7740931688849082 --bit_precision 25 \n",
      "2017-11-01 13:41:13,596 INFO     [root/vw-hyperopt:284]: loss value: 0.261582\n",
      "2017-11-01 13:41:13,597 INFO     [root/vw-hyperopt:301]: evaluation time for this step: 0:02:08.741360\n",
      "2017-11-01 13:41:13,738 INFO     [hyperopt.tpe/tpe:814]: tpe_transform took 0.012733 seconds\n",
      "2017-11-01 13:41:13,740 INFO     [hyperopt.tpe/tpe:842]: TPE using 84/84 trials with best loss 0.211586\n",
      "2017-11-01 13:41:13,767 INFO     [root/vw-hyperopt:293]: \n",
      "\n",
      "Starting trial no.85\n",
      "2017-11-01 13:41:13,769 INFO     [root/vw-hyperopt:231]: executing the following command (training): vw -d ../../data/arktur_medium//part_train.vw -f ./current.model --holdout_off -c  -l 0.13123043055964997 --l2 0.011323371420032766 --ngram 2 --passes 8 --loss_function squared --power_t 0.4351752978519615 --bit_precision 25 \n"
     ]
    },
    {
     "ename": "KeyboardInterrupt",
     "evalue": "",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mKeyboardInterrupt\u001b[0m                         Traceback (most recent call last)",
      "\u001b[0;32m/vowpal_wabbit/utl/vw-hyperopt.py\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[1;32m    377\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    378\u001b[0m \u001b[0;32mif\u001b[0m \u001b[0m__name__\u001b[0m \u001b[0;34m==\u001b[0m \u001b[0;34m'__main__'\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 379\u001b[0;31m     \u001b[0mmain\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m",
      "\u001b[0;32m/vowpal_wabbit/utl/vw-hyperopt.py\u001b[0m in \u001b[0;36mmain\u001b[0;34m()\u001b[0m\n\u001b[1;32m    371\u001b[0m                        searcher=args.searcher, is_regression=args.regression)\n\u001b[1;32m    372\u001b[0m     \u001b[0mh\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mget_y_true_holdout\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 373\u001b[0;31m     \u001b[0mh\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mhyperopt_search\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    374\u001b[0m     \u001b[0;32mif\u001b[0m \u001b[0margs\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mplot\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    375\u001b[0m         \u001b[0mh\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mplot_progress\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/vowpal_wabbit/utl/vw-hyperopt.py\u001b[0m in \u001b[0;36mhyperopt_search\u001b[0;34m(self, parallel)\u001b[0m\n\u001b[1;32m    319\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    320\u001b[0m         \u001b[0mlogging\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mdebug\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"starting hypersearch...\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 321\u001b[0;31m         \u001b[0mbest_params\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mfmin\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mobjective\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mspace\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mspace\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mtrials\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtrials\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0malgo\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0malgo\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mmax_evals\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mmax_evals\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    322\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mlogger\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mdebug\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"the best hyperopt parameters: %s\"\u001b[0m \u001b[0;34m%\u001b[0m \u001b[0mstr\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mbest_params\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    323\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/fmin.py\u001b[0m in \u001b[0;36mfmin\u001b[0;34m(fn, space, algo, max_evals, trials, rstate, allow_trials_fmin, pass_expr_memo_ctrl, catch_eval_exceptions, verbose, return_argmin)\u001b[0m\n\u001b[1;32m    305\u001b[0m             \u001b[0mverbose\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mverbose\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    306\u001b[0m             \u001b[0mcatch_eval_exceptions\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mcatch_eval_exceptions\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 307\u001b[0;31m             \u001b[0mreturn_argmin\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mreturn_argmin\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    308\u001b[0m         )\n\u001b[1;32m    309\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/base.py\u001b[0m in \u001b[0;36mfmin\u001b[0;34m(self, fn, space, algo, max_evals, rstate, verbose, pass_expr_memo_ctrl, catch_eval_exceptions, return_argmin)\u001b[0m\n\u001b[1;32m    633\u001b[0m             \u001b[0mpass_expr_memo_ctrl\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mpass_expr_memo_ctrl\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    634\u001b[0m             \u001b[0mcatch_eval_exceptions\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mcatch_eval_exceptions\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 635\u001b[0;31m             return_argmin=return_argmin)\n\u001b[0m\u001b[1;32m    636\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    637\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/fmin.py\u001b[0m in \u001b[0;36mfmin\u001b[0;34m(fn, space, algo, max_evals, trials, rstate, allow_trials_fmin, pass_expr_memo_ctrl, catch_eval_exceptions, verbose, return_argmin)\u001b[0m\n\u001b[1;32m    318\u001b[0m                     verbose=verbose)\n\u001b[1;32m    319\u001b[0m     \u001b[0mrval\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcatch_eval_exceptions\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mcatch_eval_exceptions\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 320\u001b[0;31m     \u001b[0mrval\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mexhaust\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    321\u001b[0m     \u001b[0;32mif\u001b[0m \u001b[0mreturn_argmin\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    322\u001b[0m         \u001b[0;32mreturn\u001b[0m \u001b[0mtrials\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0margmin\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/fmin.py\u001b[0m in \u001b[0;36mexhaust\u001b[0;34m(self)\u001b[0m\n\u001b[1;32m    197\u001b[0m     \u001b[0;32mdef\u001b[0m \u001b[0mexhaust\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    198\u001b[0m         \u001b[0mn_done\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mlen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtrials\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 199\u001b[0;31m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mrun\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mmax_evals\u001b[0m \u001b[0;34m-\u001b[0m \u001b[0mn_done\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mblock_until_done\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0masync\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    200\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtrials\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mrefresh\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    201\u001b[0m         \u001b[0;32mreturn\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/fmin.py\u001b[0m in \u001b[0;36mrun\u001b[0;34m(self, N, block_until_done)\u001b[0m\n\u001b[1;32m    171\u001b[0m             \u001b[0;32melse\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    172\u001b[0m                 \u001b[0;31m# -- loop over trials and do the jobs directly\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 173\u001b[0;31m                 \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mserial_evaluate\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    174\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    175\u001b[0m             \u001b[0;32mif\u001b[0m \u001b[0mstopped\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/fmin.py\u001b[0m in \u001b[0;36mserial_evaluate\u001b[0;34m(self, N)\u001b[0m\n\u001b[1;32m     90\u001b[0m                 \u001b[0mctrl\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mbase\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mCtrl\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtrials\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mcurrent_trial\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mtrial\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     91\u001b[0m                 \u001b[0;32mtry\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---> 92\u001b[0;31m                     \u001b[0mresult\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mdomain\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mevaluate\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mspec\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mctrl\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     93\u001b[0m                 \u001b[0;32mexcept\u001b[0m \u001b[0mException\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0me\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     94\u001b[0m                     \u001b[0mlogger\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0minfo\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'job exception: %s'\u001b[0m \u001b[0;34m%\u001b[0m \u001b[0mstr\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0me\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/local/lib/python3.5/dist-packages/hyperopt/base.py\u001b[0m in \u001b[0;36mevaluate\u001b[0;34m(self, config, ctrl, attach_attachments)\u001b[0m\n\u001b[1;32m    838\u001b[0m                 \u001b[0mmemo\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mmemo\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    839\u001b[0m                 print_node_on_error=self.rec_eval_print_node_on_error)\n\u001b[0;32m--> 840\u001b[0;31m             \u001b[0mrval\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mfn\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mpyll_rval\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    841\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    842\u001b[0m         \u001b[0;32mif\u001b[0m \u001b[0misinstance\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mrval\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m(\u001b[0m\u001b[0mfloat\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mint\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mnp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mnumber\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/vowpal_wabbit/utl/vw-hyperopt.py\u001b[0m in \u001b[0;36mobjective\u001b[0;34m(kwargs)\u001b[0m\n\u001b[1;32m    293\u001b[0m             \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mlogger\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0minfo\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'\\n\\nStarting trial no.%d'\u001b[0m \u001b[0;34m%\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcurrent_trial\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    294\u001b[0m             \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mget_hyperparam_string\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m**\u001b[0m\u001b[0mkwargs\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 295\u001b[0;31m             \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mfit_vw\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    296\u001b[0m             \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mvalidate_vw\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    297\u001b[0m             \u001b[0mloss\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mvalidation_metric_vw\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/vowpal_wabbit/utl/vw-hyperopt.py\u001b[0m in \u001b[0;36mfit_vw\u001b[0;34m(self)\u001b[0m\n\u001b[1;32m    230\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcompose_vw_train_command\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    231\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mlogger\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0minfo\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"executing the following command (training): %s\"\u001b[0m \u001b[0;34m%\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtrain_command\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 232\u001b[0;31m         \u001b[0msubprocess\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcall\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mshlex\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msplit\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtrain_command\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    233\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    234\u001b[0m     \u001b[0;32mdef\u001b[0m \u001b[0mvalidate_vw\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/lib/python3.5/subprocess.py\u001b[0m in \u001b[0;36mcall\u001b[0;34m(timeout, *popenargs, **kwargs)\u001b[0m\n\u001b[1;32m    557\u001b[0m     \u001b[0;32mwith\u001b[0m \u001b[0mPopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m*\u001b[0m\u001b[0mpopenargs\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m**\u001b[0m\u001b[0mkwargs\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mp\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    558\u001b[0m         \u001b[0;32mtry\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 559\u001b[0;31m             \u001b[0;32mreturn\u001b[0m \u001b[0mp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mwait\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mtimeout\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mtimeout\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    560\u001b[0m         \u001b[0;32mexcept\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    561\u001b[0m             \u001b[0mp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mkill\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/lib/python3.5/subprocess.py\u001b[0m in \u001b[0;36mwait\u001b[0;34m(self, timeout, endtime)\u001b[0m\n\u001b[1;32m   1656\u001b[0m                         \u001b[0;32mif\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mreturncode\u001b[0m \u001b[0;32mis\u001b[0m \u001b[0;32mnot\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1657\u001b[0m                             \u001b[0;32mbreak\u001b[0m  \u001b[0;31m# Another thread waited.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 1658\u001b[0;31m                         \u001b[0;34m(\u001b[0m\u001b[0mpid\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0msts\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0m_try_wait\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;36m0\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m   1659\u001b[0m                         \u001b[0;31m# Check the pid and loop as waitpid has been known to\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1660\u001b[0m                         \u001b[0;31m# return 0 even without WNOHANG in odd situations.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;32m/usr/lib/python3.5/subprocess.py\u001b[0m in \u001b[0;36m_try_wait\u001b[0;34m(self, wait_flags)\u001b[0m\n\u001b[1;32m   1606\u001b[0m             \u001b[0;34m\"\"\"All callers to this function MUST hold self._waitpid_lock.\"\"\"\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1607\u001b[0m             \u001b[0;32mtry\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 1608\u001b[0;31m                 \u001b[0;34m(\u001b[0m\u001b[0mpid\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0msts\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mos\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mwaitpid\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mpid\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mwait_flags\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m   1609\u001b[0m             \u001b[0;32mexcept\u001b[0m \u001b[0mChildProcessError\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1610\u001b[0m                 \u001b[0;31m# This happens if SIGCLD is set to be ignored or waiting\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n",
      "\u001b[0;31mKeyboardInterrupt\u001b[0m: "
     ]
    }
   ],
   "source": [
    "%run /vowpal_wabbit/utl/vw-hyperopt.py \\\n",
    "  --train $PATH_TO_DATA/$OUT_PART_TRAIN \\\n",
    "  --holdout $PATH_TO_DATA/$OUT_PART_VALID \\\n",
    "  --max_evals 200 \\\n",
    "  --outer_loss_function squared \\\n",
    "  --vw_space '--algorithms=sgd --ngram=2 --bit_precision=25 --l2=1e-8..1e-1~LO --l1=1e-8..1e-1~LO -l=0.01..10~L --power_t=0.01..1 --passes=1..10~I --loss_function=squared' --plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 466,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "\n",
      "Generating 2-grams for all namespaces.\n",
      "using l2 regularization = 0.13\n",
      "final_regressor = ../../data/arktur_medium//model.vw\n",
      "Num weight bits = 25\n",
      "learning rate = 0.144\n",
      "initial_t = 0\n",
      "power_t = 0.567\n",
      "decay_learning_rate = 1\n",
      "creating cache_file = ../../data/arktur_medium//medium.cache\n",
      "Reading datafile = ../../data/arktur_medium//part_train.vw\n",
      "num sources = 1\n",
      "average  since         example        example  current  current  current\n",
      "loss     last          counter         weight    label  predict features\n",
      "3.735672 3.735672            1            1.0   1.9328   0.0000     1235\n",
      "2.219101 0.702529            2            2.0   1.7891   0.9509      907\n",
      "1.640228 1.061355            4            4.0   0.8340   0.2149      485\n",
      "1.002443 0.364659            8            8.0   1.6958   1.9328     4389\n",
      "0.828320 0.654197           16           16.0   0.3266   0.3875      799\n",
      "0.582747 0.337175           32           32.0   1.3425   1.6635     1607\n",
      "0.462147 0.341547           64           64.0   0.0940   0.2581      219\n",
      "0.437955 0.413763          128          128.0   1.5040   0.9268     1691\n",
      "0.364201 0.290447          256          256.0   0.9962   0.7019     2921\n",
      "0.320868 0.277535          512          512.0   0.0940   0.2502      607\n",
      "0.362856 0.404844         1024         1024.0   1.7346   1.1146     2999\n",
      "0.408271 0.453686         2048         2048.0   1.2429   0.6848     1097\n",
      "0.417994 0.427718         4096         4096.0   0.7321   0.5632     1555\n",
      "0.440787 0.463580         8192         8192.0   0.8340   0.0304      805\n",
      "0.499666 0.558544        16384        16384.0   1.4215   0.7031     2653\n",
      "0.552749 0.605833        32768        32768.0   1.3589   0.0307      121\n",
      "0.573538 0.573538        65536        65536.0   0.6657   0.1854      133 h\n",
      "0.622570 0.671601       131072       131072.0  -0.3665   0.0701     1059 h\n",
      "\n",
      "finished run\n",
      "number of examples per pass = 33201\n",
      "passes used = 4\n",
      "weighted example sum = 132804.000000\n",
      "weighted label sum = 81298.018717\n",
      "average loss = 0.525820 h\n",
      "best constant = 0.612165\n",
      "total feature number = 158934748\n"
     ]
    }
   ],
   "source": [
    "!rm $PATH_TO_DATA/medium.cache \n",
    "!vw -d $PATH_TO_DATA/$OUT_PART_TRAIN --cache_file=$PATH_TO_DATA/medium.cache \\\n",
    "  --loss_function squared --ngram=2 --passes 8 -b 25 -l 0.144 --power_t=0.567 --l2=0.13 \\\n",
    "  -f $PATH_TO_DATA/model.vw #--readable_model=$PATH_TO_DATA/readable_model.vw"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 467,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "0.67203457751046625"
      ]
     },
     "execution_count": 467,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# predict for validation and MAE\n",
    "\n",
    "!vw -i $PATH_TO_DATA/model.vw -t -d $PATH_TO_DATA/$OUT_PART_VALID \\\n",
    "-p $PATH_TO_DATA/part_valid_predictions.txt --quiet\n",
    "\n",
    "from sklearn.metrics import mean_absolute_error\n",
    "\n",
    "y_true = np.loadtxt(PATH_TO_DATA + '/part_valid_target.txt')\n",
    "y_pred = np.loadtxt(PATH_TO_DATA + '/part_valid_predictions.txt')\n",
    "\n",
    "mean_absolute_error(y_true, y_pred)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# create test data\n",
    "\n",
    "with open(os.path.join(PATH_TO_DATA, INP_TEST)) as inp_json, \\\n",
    "     open(os.path.join(PATH_TO_DATA, OUT_TEST), 'w') as out_test:\n",
    "            \n",
    "    for n, line in enumerate(tqdm_notebook(inp_json)):\n",
    "        if n == -1: break\n",
    "\n",
    "        json_data = json.loads(line)\n",
    "        out = to_vw(json_data, 1)\n",
    "        out_test.write(out)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "#--loss_function squared --ngram=2 --passes 5 -b 24 -l 0.5 --power_t=0.5 --l2=1e-5 \\"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 472,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "\n",
      "Generating 2-grams for all namespaces.\n",
      "using l2 regularization = 0.13\n",
      "final_regressor = ../../data/arktur_medium//model.vw\n",
      "Num weight bits = 25\n",
      "learning rate = 0.144\n",
      "initial_t = 0\n",
      "power_t = 0.567\n",
      "decay_learning_rate = 1\n",
      "creating cache_file = ../../data/arktur_medium//medium.cache\n",
      "Reading datafile = ../../data/arktur_medium//train.vw\n",
      "num sources = 1\n",
      "average  since         example        example  current  current  current\n",
      "loss     last          counter         weight    label  predict features\n",
      "3.735672 3.735672            1            1.0   1.9328   0.0000     1235\n",
      "2.219101 0.702529            2            2.0   1.7891   0.9509      907\n",
      "1.640228 1.061355            4            4.0   0.8340   0.2149      485\n",
      "1.002443 0.364659            8            8.0   1.6958   1.9328     4389\n",
      "0.828320 0.654197           16           16.0   0.3266   0.3875      799\n",
      "0.582747 0.337175           32           32.0   1.3425   1.6635     1607\n",
      "0.462147 0.341547           64           64.0   0.0940   0.2581      219\n",
      "0.437955 0.413763          128          128.0   1.5040   0.9268     1691\n",
      "0.364201 0.290447          256          256.0   0.9962   0.7019     2921\n",
      "0.320868 0.277535          512          512.0   0.0940   0.2502      607\n",
      "0.362856 0.404844         1024         1024.0   1.7346   1.1146     2999\n",
      "0.408271 0.453686         2048         2048.0   1.2429   0.6848     1097\n",
      "0.417994 0.427718         4096         4096.0   0.7321   0.5632     1555\n",
      "0.440787 0.463580         8192         8192.0   0.8340   0.0304      805\n",
      "0.499666 0.558544        16384        16384.0   1.4215   0.7031     2653\n",
      "0.552749 0.605833        32768        32768.0   1.3589   0.0307      121\n",
      "0.582875 0.582875        65536        65536.0   0.9102   0.0234     3607 h\n",
      "0.626606 0.670332       131072       131072.0   1.4013   0.0709      337 h\n",
      "\n",
      "finished run\n",
      "number of examples per pass = 47430\n",
      "passes used = 4\n",
      "weighted example sum = 189720.000000\n",
      "weighted label sum = 116159.940497\n",
      "average loss = 0.558021 h\n",
      "best constant = 0.612270\n",
      "total feature number = 223327488\n"
     ]
    }
   ],
   "source": [
    "!rm $PATH_TO_DATA/medium.cache \n",
    "!vw -d $PATH_TO_DATA/$OUT_TRAIN --cache_file $PATH_TO_DATA/medium.cache \\\n",
    "  --loss_function squared --ngram=2 --passes 8 -b 25 -l 0.144 --power_t=0.567 --l2=0.13 \\\n",
    "  -f $PATH_TO_DATA/model.vw --readable_model=$PATH_TO_DATA/readable_model.vw"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 473,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n"
     ]
    }
   ],
   "source": [
    "# predict for test\n",
    "\n",
    "!vw -i $PATH_TO_DATA/model.vw -t -d $PATH_TO_DATA/test.vw \\\n",
    "-p $PATH_TO_DATA/test_predictions.txt --quiet"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 474,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# create submission\n",
    "\n",
    "submission = pd.read_csv(PATH_TO_DATA + '/sample_submission.csv', index_col='id')\n",
    "submission['log_recommends'] = np.exp(np.loadtxt(PATH_TO_DATA + '/test_predictions.txt'))\n",
    "# submission['log_recommends'] = np.loadtxt(PATH_TO_DATA + '/test_predictions.txt')\n",
    "submission.to_csv(PATH_TO_DATA + '/submit/hyperopt.csv')"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.5.2"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
